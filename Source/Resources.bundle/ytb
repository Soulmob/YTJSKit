/*! For license information please see ytb.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("message",[],t):"object"==typeof exports?exports.message=t():e.message=t()}(this,(()=>(()=>{var __webpack_modules__={423:(e,t,n)=>{var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e=n.nmd(e),function(){"use strict";var t="input is invalid type",o="object"===("undefined"==typeof window?"undefined":i(window)),a=o?window:{};a.JS_SHA1_NO_WINDOW&&(o=!1);var s=!o&&"object"===("undefined"==typeof self?"undefined":i(self)),u=!a.JS_SHA1_NO_NODE_JS&&"object"===("undefined"==typeof process?"undefined":i(process))&&process.versions&&process.versions.node;u?a=n.g:s&&(a=self);var l=!a.JS_SHA1_NO_COMMON_JS&&"object"===i(e)&&e.exports,c=n.amdO,d=!a.JS_SHA1_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,h="0123456789abcdef".split(""),f=[-2147483648,8388608,32768,128],v=[24,16,8,0],p=["hex","array","digest","arrayBuffer"],_=[],y=Array.isArray;!a.JS_SHA1_NO_NODE_JS&&y||(y=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var m=ArrayBuffer.isView;!d||!a.JS_SHA1_NO_ARRAY_BUFFER_IS_VIEW&&m||(m=function(e){return"object"===i(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var b=function(e){var n=i(e);if("string"===n)return[e,!0];if("object"!==n||null===e)throw new Error(t);if(d&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(!y(e)&&!m(e))throw new Error(t);return[e,!1]},g=function(e){return function(t){return new T(!0).update(t)[e]()}},w=function(e){return function(t,n){return new E(t,!0).update(n)[e]()}};function T(e){e?(_[0]=_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0,this.blocks=_):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function E(e,t){var n,r=b(e);if(e=r[0],r[1]){var i,o=[],a=e.length,s=0;for(n=0;n<a;++n)(i=e.charCodeAt(n))<128?o[s++]=i:i<2048?(o[s++]=192|i>>>6,o[s++]=128|63&i):i<55296||i>=57344?(o[s++]=224|i>>>12,o[s++]=128|i>>>6&63,o[s++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++n)),o[s++]=240|i>>>18,o[s++]=128|i>>>12&63,o[s++]=128|i>>>6&63,o[s++]=128|63&i);e=o}e.length>64&&(e=new T(!0).update(e).array());var u=[],l=[];for(n=0;n<64;++n){var c=e[n]||0;u[n]=92^c,l[n]=54^c}T.call(this,t),this.update(l),this.oKeyPad=u,this.inner=!0,this.sharedMemory=t}T.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t=b(e);e=t[0];for(var n,r,i=t[1],o=0,a=e.length||0,s=this.blocks;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,this.block=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),i)for(r=this.start;o<a&&r<64;++o)(n=e.charCodeAt(o))<128?s[r>>>2]|=n<<v[3&r++]:n<2048?(s[r>>>2]|=(192|n>>>6)<<v[3&r++],s[r>>>2]|=(128|63&n)<<v[3&r++]):n<55296||n>=57344?(s[r>>>2]|=(224|n>>>12)<<v[3&r++],s[r>>>2]|=(128|n>>>6&63)<<v[3&r++],s[r>>>2]|=(128|63&n)<<v[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++o)),s[r>>>2]|=(240|n>>>18)<<v[3&r++],s[r>>>2]|=(128|n>>>12&63)<<v[3&r++],s[r>>>2]|=(128|n>>>6&63)<<v[3&r++],s[r>>>2]|=(128|63&n)<<v[3&r++]);else for(r=this.start;o<a&&r<64;++o)s[r>>>2]|=e[o]<<v[3&r++];this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=f[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},T.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,i=this.h2,o=this.h3,a=this.h4,s=this.blocks;for(e=16;e<80;++e)t=s[e-3]^s[e-8]^s[e-14]^s[e-16],s[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|~r&o)+a+1518500249+s[e]|0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&i)+o+1518500249+s[e+1]|0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+i+1518500249+s[e+2]|0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|~o&n)+r+1518500249+s[e+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|~i&a)+n+1518500249+s[e+4]|0,i=i<<30|i>>>2;for(;e<40;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a+1859775393+s[e]|0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o+1859775393+s[e+1]|0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i+1859775393+s[e+2]|0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r+1859775393+s[e+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n+1859775393+s[e+4]|0,i=i<<30|i>>>2;for(;e<60;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r&i|r&o|i&o)+a-1894007588+s[e]|0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&i|r&i)+o-1894007588+s[e+1]|0)<<5|o>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+i-1894007588+s[e+2]|0)<<5|i>>>27)+(o&(a=a<<30|a>>>2)|o&n|a&n)+r-1894007588+s[e+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|i&a|o&a)+n-1894007588+s[e+4]|0,i=i<<30|i>>>2;for(;e<80;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(a=(t=n<<5|n>>>27)+(r^i^o)+a-899497514+s[e]|0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^i)+o-899497514+s[e+1]|0)<<5|o>>>27)+(a^(n=n<<30|n>>>2)^r)+i-899497514+s[e+2]|0)<<5|i>>>27)+(o^(a=a<<30|a>>>2)^n)+r-899497514+s[e+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^a)+n-899497514+s[e+4]|0,i=i<<30|i>>>2;this.h0=this.h0+n|0,this.h1=this.h1+r|0,this.h2=this.h2+i|0,this.h3=this.h3+o|0,this.h4=this.h4+a|0},T.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return h[e>>>28&15]+h[e>>>24&15]+h[e>>>20&15]+h[e>>>16&15]+h[e>>>12&15]+h[e>>>8&15]+h[e>>>4&15]+h[15&e]+h[t>>>28&15]+h[t>>>24&15]+h[t>>>20&15]+h[t>>>16&15]+h[t>>>12&15]+h[t>>>8&15]+h[t>>>4&15]+h[15&t]+h[n>>>28&15]+h[n>>>24&15]+h[n>>>20&15]+h[n>>>16&15]+h[n>>>12&15]+h[n>>>8&15]+h[n>>>4&15]+h[15&n]+h[r>>>28&15]+h[r>>>24&15]+h[r>>>20&15]+h[r>>>16&15]+h[r>>>12&15]+h[r>>>8&15]+h[r>>>4&15]+h[15&r]+h[i>>>28&15]+h[i>>>24&15]+h[i>>>20&15]+h[i>>>16&15]+h[i>>>12&15]+h[i>>>8&15]+h[i>>>4&15]+h[15&i]},T.prototype.toString=T.prototype.hex,T.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,i>>>24&255,i>>>16&255,i>>>8&255,255&i]},T.prototype.array=T.prototype.digest,T.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e},E.prototype=new T,E.prototype.finalize=function(){if(T.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();T.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),T.prototype.finalize.call(this)}};var S=function(){var e=g("hex");u&&(e=function(e){var r,i=n(480),o=n(97).Buffer;return r=o.from&&!a.JS_SHA1_NO_BUFFER_FROM?o.from:function(e){return new o(e)},function(n){if("string"==typeof n)return i.createHash("sha1").update(n,"utf8").digest("hex");if(null==n)throw new Error(t);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),y(n)||m(n)||n.constructor===o?i.createHash("sha1").update(r(n)).digest("hex"):e(n)}}(e)),e.create=function(){return new T},e.update=function(t){return e.create().update(t)};for(var r=0;r<p.length;++r){var i=p[r];e[i]=g(i)}return e}();S.sha1=S,S.sha1.hmac=function(){var e=w("hex");e.create=function(e){return new E(e)},e.update=function(t,n){return e.create(t).update(n)};for(var t=0;t<p.length;++t){var n=p[t];e[n]=w(n)}return e}(),l?e.exports=S:(a.sha1=S,c&&(void 0===(r=function(){return S}.call(S,n,S,e))||(e.exports=r)))}()},148:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Err_Code_Request_Params_Failed=t.Err_Code_Parse_Video_Failed=t.Err_Code_Signature_Failed=t.Err_Code_N_Function_Failed=t.Err_Code_Unknown=t.Err_Code_Video_UNPLAYABLE=t.Err_Code_Video_Login_Required=t.Err_Code_Video_Unavailable=t.Err_Code_Get_Video_Info_Failed=t.Err_Code_Video_ID_Failed=t.Err_Code_Invalid_URL_Format=t.Err_Code_Invalid_Playable_URL=t.Err_Code_Params_URL_NOT_Exist=t.JSBridgePayloadSearchFilter=void 0,t.Err_Code_Params_URL_NOT_Exist=10001,t.Err_Code_Invalid_Playable_URL=10002,t.Err_Code_Invalid_URL_Format=10003,t.Err_Code_Video_ID_Failed=1004,t.Err_Code_Get_Video_Info_Failed=1005,t.Err_Code_Video_Unavailable=1006,t.Err_Code_Video_Login_Required=1007,t.Err_Code_Video_UNPLAYABLE=1008,t.Err_Code_Parse_Video_Failed=1009,t.Err_Code_N_Function_Failed=2001,t.Err_Code_Signature_Failed=2002,t.Err_Code_Request_Params_Failed=4001,t.Err_Code_Unknown=9999,(n=t.JSBridgePayloadSearchFilter||(t.JSBridgePayloadSearchFilter={}))[n.ALL=0]="ALL",n[n.Track=1]="Track",n[n.Playlist=2]="Playlist"},315:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAppLanguage=void 0;var h=n(205),f=d(n(297)),v=a(n(795)),p=d(n(713)),_=n(205),y=n(864),m=d(n(220)),b=n(148);function g(e){return!(!e||0==e.length)&&-1!==e.indexOf("youtu.be/")}function w(e){return!(!e||0==e.length)&&-1!==e.indexOf("music.youtube.com")}function T(e){return!(!e||0==e.length)&&-1!==e.indexOf("/channel/MPREb_")}function E(e){if(!e||0==e.length)return!1;var t=w(e),n=-1!==e.indexOf("youtube.com")||g(e),r=T(e);return n||t||r}function S(e){if(e&&0!=e.length){if(!E(e))return[];var t=(0,h.getQueryVariables)(e),n=t.v;return g(e)&&(n=function(e){if(g(e)){var t=e.indexOf("youtu.be/");return e.substring(t+9)}}(e)),[n,t.list]}}function x(e,t,n,r){var i,o;return s(this,void 0,void 0,(function(){var t,a,s,d,h,p,y,g,x,A,C,O,P,N,M,L,k,D,U;return u(this,(function(u){switch(u.label){case 0:return e&&0!=e.length?E(e)?(t=T(e),a=w(e),s=l(S(e),2),d=s[0],h=s[1],d||h||t?t?[3,6]:(p="https://".concat(a?"music":"www",".youtube.com/watch"),d&&(p="".concat(p,"?v=").concat(d)),h&&(p="".concat(p).concat(d?"&":"?","list=").concat(h)),y={success:!1},a?[4,I()]:[3,2]):[2,{success:!1,code:b.Err_Code_Invalid_URL_Format}]):[2,{success:!1,code:b.Err_Code_Invalid_Playable_URL}]:[2,{success:!1,code:b.Err_Code_Params_URL_NOT_Exist}];case 1:return g=!u.sent(),[3,4];case 2:return[4,R()];case 3:g=!u.sent(),u.label=4;case 4:return x=function(){return new Promise((function(t){new m.default({url:e,parseDetailInfo:!0,simpleMode:!0,allTarget:r,formatId:n,onCompleteCallback:function(e){t({success:!0,data:e})},onError:function(e){t({success:!1,msg:null==e?void 0:e.message})},onNetworkError:function(e){t({success:!1,msg:null==e?void 0:e.message})}})})).catch((function(e){return{success:!1,msg:null==e?void 0:e.message}}))},A=g?x():f.default.queryVideoInfo(p,!1,!0,{allTarget:r,formatId:n}).then((function(e){return e.success||e.code===b.Err_Code_Get_Video_Info_Failed?e:x()})),C=r||[95,96].includes(n),[4,Promise.all([d?A:y,C?f.default.queryVideoInfo(p,!0):y,h?a?(0,_.safeExecute)(v.getYouTubeMusicPlayList(e)):(0,_.safeExecute)(v.getVideoFromPlayList(e)):y])];case 5:return O=l.apply(void 0,[u.sent(),3]),P=O[0],N=O[1],M=O[2],L=P.data||N.data,k=(null===(i=P.data)||void 0===i?void 0:i.formats)||[],D=(null===(o=N.data)||void 0===o?void 0:o.formats)||[],U=c([],l(k),!1),D.forEach((function(e){-1===k.findIndex((function(t){return e.itag===t.itag}))&&U.push(e)})),L&&(L.formats=U),[2,{success:d?P.success:M.success,code:d?P.code:M.code,data:{song:L,playlist:M.data}}];case 6:return[4,(0,_.safeExecute)(v.getYouTubeMusicChannelPlayList(e))];case 7:return[2,u.sent()]}}))}))}function A(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){App.fetchAppInfoToNativeThen("lang",(function(t){e(t)}))}))]}))}))}function R(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("use_api_for_ytb_v1",(function(t){e(t&&"false"!==t)}))}))]}))}))}function I(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("use_api_for_music",(function(t){e(t&&"false"!==t)}))}))]}))}))}t.getAppLanguage=A,t.default={extractSong:x,extractRecommends:function(e){return s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return t=l(S(e),2),n=t[0],t[1],n&&0!==n.length?[4,A()]:[2,{success:!1,code:b.Err_Code_Invalid_URL_Format}];case 1:return r.sent(),[2,{success:!1}]}}))}))},extractTrending:function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,(0,_.safeExecute)(f.default.fetchTrendingVideos())]}))}))},search:function(e,t,n){return s(this,void 0,void 0,(function(){return u(this,(function(r){return t.length>0?[2,(0,_.safeExecute)(p.default.nextPage(t))]:[2,(0,_.safeExecute)(p.default.go(e,n))]}))}))},extractHots:function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,(0,_.safeExecute)(f.default.fetchHotVideos())]}))}))},extractLink:function(e){var t,n;return s(this,void 0,void 0,(function(){var i;return u(this,(function(o){switch(o.label){case 0:return E(e)?[4,x(e)]:[3,2];case 1:return i=o.sent(),[2,r(r({},i),{data:(null===(t=i.data)||void 0===t?void 0:t.song)?[null===(n=i.data)||void 0===n?void 0:n.song]:[]})];case 2:return y.TiwtterExtractor.isMatch(e)?[4,(new y.TiwtterExtractor).real_extract(e)]:[3,4];case 3:return[2,o.sent()];case 4:return[2,{success:!1,code:b.Err_Code_Invalid_Playable_URL}]}}))}))},extractYtbCharts:function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){return[2,(0,_.safeExecute)(v.getYouTubeMusicCharts(e))]}))}))},extractYtbMusicHome:function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,(0,_.safeExecute)(v.getYouTubeMusicHome())]}))}))}}},864:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TiwtterExtractor=void 0;var a=o(n(680)),s=function(){function e(){this._API_BASE="https://api.twitter.com/1.1/",this._GUEST_TOKEN=""}return e.isMatch=function(t){var n=new RegExp(e._BASE_REGEX);return t&&n.test(t)},e.prototype._callApi=function(e,t){return r(this,void 0,void 0,(function(){var n,r,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:return n={Authorization:"Bearer AAAAAAAAAAAAAAAAAAAAAPYXBAAAAAAACLXUNDekMxqa8h%2F40K4moUkGsoc%3DTYfbDKbT3jJPCEVnMYqilB28NHfOPqkca3qaAxGfsyKCs0wRbw","x-guest-token":""},this._GUEST_TOKEN?[3,2]:[4,this._downloadJSON(this._API_BASE+"guest/activate.json","POST",n)];case 1:if(r=i.sent(),o=r.success,a=r.data,s=r.msg,o&&(this._GUEST_TOKEN=a.guest_token),!this._GUEST_TOKEN)return[2,{success:!1,msg:s||"fetch guest_token fail"}];i.label=2;case 2:return n["x-guest-token"]=this._GUEST_TOKEN,u="",t&&Object.keys(t).forEach((function(e){u+="".concat(u?"&":"?").concat(e,"=").concat(t[e])})),[4,this._downloadJSON(this._API_BASE+e+u,"GET",n)];case 3:return[2,i.sent()]}}))}))},e.prototype._downloadJSON=function(e,t,n){return r(this,void 0,void 0,(function(){var r,o,s,u,l;return i(this,(function(i){switch(i.label){case 0:return[4,(0,a.default)(e,{method:t||"GET",headers:n,credentials:!1})];case 1:return r=i.sent(),o=r.success,s=r.data,u=r.code,l=r.errorMsg,o?[2,{success:o,data:s}]:[2,{success:o,msg:l,code:u}]}}))}))},e.prototype._getStatusId=function(t){var n=e._BASE_REGEX+"(?:(?:i/web|[^/]+)/status|statuses)/(\\d+)",r=new RegExp(n).exec(t);return!(!r||!r[1])&&r[1]},e.prototype.real_extract=function(e){var t,n,o,a,s;return r(this,void 0,void 0,(function(){var r,u,l,c,d,h,f,v,p,_,y,m,b,g,w,T,E,S,x;return i(this,(function(i){switch(i.label){case 0:return(r=this._getStatusId(e))?[4,this._callApi("statuses/show/".concat(r,".json"),{cards_platform:"Web-12",include_cards:1,include_reply_count:1,include_user_entities:0,tweet_mode:"extended"})]:[2,{success:!1,msg:"invaild url"}];case 1:return u=i.sent(),l=u.success,c=u.data,d=u.msg,l&&c?(h=c.full_text.replace("\n",""),f=h.replace(/\s+https?:\/\/[^ ]+/,""),v=null===(t=c.user)||void 0===t?void 0:t.name,p=[],(_=null===(n=c.extended_entities)||void 0===n?void 0:n.media)?(_.forEach((function(t){var n=t.id,i={id:String(n||r),url:e,title:f,description:h,author:v,duration:0,formats:[],thumbnails:[]},o=[],a=[],s=t.media_url_https||t.media_url;if(a.push({url:s}),"photo"!==t.type){var u=t.video_info;u&&u.variants&&(i.duration=u.duration_millis/1e3,u.variants.forEach((function(e){var t=e.url;if(t&&-1==t.indexOf("m3u8")){var n={url:t,type:e.content_type||"video/mp4"};o.push(n)}})))}else o.push({url:s,mime:"img",type:"img"});i.formats=o,i.thumbnails=a,p.push(i)})),[3,5]):[3,2]):[2,{success:!1,msg:d}];case 2:return c.card?(y=c.card,b=(m=y||{}).binding_values,g=m.name,b&&"summary_large_image"===g&&(w=b.thumbnail_image_small,T=b.summary_photo_image_original,w&&T&&((E={id:r,url:e,title:f,description:h,author:v,duration:0,formats:[],thumbnails:[]}).formats=[{url:null===(o=null==T?void 0:T.image_value)||void 0===o?void 0:o.url,mime:"img",type:"img"}],E.thumbnails=[{url:null===(a=null==w?void 0:w.image_value)||void 0===a?void 0:a.url}],p.push(E))),[3,5]):[3,3];case 3:return c.entities&&(S=c.entities.urls)&&(x=null===(s=S[0])||void 0===s?void 0:s.expanded_url)&&this._getStatusId(x)?[4,this.real_extract(x)]:[3,5];case 4:return[2,i.sent()];case 5:return[2,{success:l,data:p}]}}))}))},e._BASE_REGEX="https?://(?:(?:www|m(?:obile)?).)?twitter.com/",e}();t.TiwtterExtractor=s},690:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(108),d=o(n(37)),h=o(n(8)),f=l(n(671)),v=function(){function e(e,t){this.transformPlan=this.getTransformPlan(e);var n=/(\S+)(?=\.)/,r=this.transformPlan[0].match(n);if(!r)throw new Error("constructor: could not find match for ".concat(n));var i=r[0];if(!i)throw new Error("constructor: could not find keyVar");this.transformMap=this.getTransformMap(e,i),this.jsFuncPatterns=[/\w+\.(\w+)\(\w,(\d+)\)/,/\S+\.(\w+)\(\w,(\d+)\)/,/\w+\[(\"\w+\")\]\(\w,(\d+)\)/],this.n_function=f.default.get_n_function(t),this.n_function||(this.n_function=this.get_n_function(e),this.n_function&&t&&f.default.save_n_function(t,this.n_function))}return e.prototype.generate_n_function=function(e,t,n,r,i){void 0===n&&(n="dlp_wins");var o=new RegExp(";\\s*if\\s*\\(\\s*typeof\\s+[a-zA-Z0-9_$]+\\s*===?\\s*(?:([\"\\'])undefined\\1|".concat(n,"\\[").concat(i,"])\\s*\\)\\s*return\\s+").concat(e,";"),"i");return t=t.replace(o,";"),r&&(t=r+";"+t),new Function(e,t)},e.prototype.get_n_function=function(e){var t,n,r,i,o,u=a(/(["'])use\s+strict\1;\s*var\s+([a-zA-Z0-9_$]+)\s*=(?:(["'])(?:(?!\3).|\\.)+\3\.split\((["'])(?:(?!\4).)+\4\)|\[\s*(?:(["\'])(?:(?!\5).|\\.)*\5\s*,?\s*)+\])/.exec(e)||[],3),l=u[0],c=(u[1],u[2]),f="\\d+\\";if(l&&c){c=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var v=(x=new Function("",l+";"+"return ".concat(c,";")))&&x();if(v&&Array.isArray(v)){var p=v.findIndex((function(e){return e.endsWith("_w8_")}));if(-1!=v.indexOf("undefined")&&(f=String(v.indexOf("undefined"))),-1!=p){var _=(A=new RegExp("[;\\n](?:function\\s+|(?:var\\s+)?)([a-zA-Z0-9_$]+)\\s*(?:=\\s*function\\s*)?\\(([a-zA-Z0-9_$]+)\\)\\s*\\{((?:(?!}[;\n]).)+\\}\\s*catch\\(\\s*[a-zA-Z0-9_$]+\\s*\\)\\s*\\{\\s*return\\s+".concat(c,"\\[").concat(p,"\\]\\s*\\+\\s*\\2\\s*\\}\\s*return\\s+[^}]+)\\}[;\\n]"),"gs").exec(e))&&A[2],y=A&&A[3];if(y)return this.generate_n_function(_,y,c,l,f)}}}var m='\\.get\\("n"\\)\\)&&\\(b=([a-zA-Z0-9$]+)(?:\\[(\\d+)\\])?\\([a-zA-Z0-9]\\)',b=a(e.match(m)||[],3),g=(b[0],b[1]),w=b[2];g&&w||(m="b=String\\.fromCharCode\\(110\\),c=a\\.get\\(b\\)\\)&&\\(c=([a-zA-Z0-9$]+)(?:\\[(\\d+)\\])?\\([a-zA-Z0-9]\\)",(t=a(e.match(m)||[],3))[0],g=t[1],w=t[2]),g&&w||((n=a(e.match(/([a-zA-Z0-9_$]+)(?:\[(\d+)\])\([a-zA-Z]\)/)||[],3))[0],g=n[1],w=n[2]),g&&w||(m='([a-zA-Z0-9$.]+)&&\\(b="nn"\\[\\+\\1\\],c=a\\.get\\(b\\)\\)&&\\(c=([a-zA-Z0-9$]+)(?:\\[(\\d+)\\])?\\([a-zA-Z0-9]\\)',(r=a(e.match(m)||[],4))[0],r[1],g=r[2],w=r[3]);var T="";if(g&&w){var E=(e.match("var ".concat(g,"\\s*=\\s*(\\[.+?\\])\\s*[,;]"))||[])[1];T=E&&(null===(o=E.replace(/^\[+|\]+$/g,""))||void 0===o?void 0:o.split(",")[Number(w)])}else(T=(e.match(";\\s*([a-zA-Z0-9_$]+)\\s*=\\s*function\\([a-zA-Z0-9_$]+\\)\\s*\\{((?:(?!};\\s)[\\s\\S]))+?[\"']enhanced_except")||[])[1])||(T=(e.match(";\\s*([a-zA-Z0-9_$]+)\\s*=\\s*function\\([a-zA-Z0-9_$]+\\)\\s*\\{((?:(?!};\\s)[\\s\\S]))+?return\\s*[\"'][\\w-]+_w8_[\"']\\s*\\+\\s*[a-zA-Z0-9_$]")||[])[1]);if(T){T=T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");try{var S=a(e.match("".concat(T,"\\s*=\\s*function\\s*\\(([\\w$]+)\\)\\s*{([\\s\\S]*?}\\s*return\\ Array.prototype.join.call\\(.*?\\))};"))||[],3),x=(S[0],_=S[1],S[2]);if(_&&x||((i=a(e.match("".concat(T,'\\s*=\\s*function\\s*\\(([\\w$]+)\\)\\s*{([\\s\\S]*?}\\s*return\\ [\\w$]+.join\\([a-zA-Z\\"\\[\\]0-9]*\\))};')),3))[0],_=i[1],x=i[2]),x&&_)return this.generate_n_function(_,x,c,l,f)}catch(e){console.log("reg n fun code error",e)}try{var A;if(A=e.match("function\\s+".concat(T,"|([{;,])\\s*").concat(T,"\\s*=\\s*function|(var|const|let)\\s+").concat(T,"\\s*=\\s*function"))){var R=A[1]||A[2],I=(p=A.index+(R?R.length:0),d.parseExpressionAt(e,p,{ecmaVersion:2020})),C=null,O=[];if(h.traverse(I,{leave:function(t){var n,r,i,o,a,s,u,l,c,d,h,f,v,p,_,y,m;"FunctionDeclaration"===t.type&&(null===(n=t.id)||void 0===n?void 0:n.name)===T&&(C=e.slice(t.body.start,t.body.end),(null===(r=t.body)||void 0===r?void 0:r.params)&&(O=null===(i=t.body)||void 0===i?void 0:i.params.map((function(e){return e.name}))),this.break()),"VariableDeclarator"===t.type&&(null===(o=t.id)||void 0===o?void 0:o.name)===T&&"FunctionDeclaration"===(null===(a=t.init)||void 0===a?void 0:a.type)&&(C=e.slice(null===(s=t.init)||void 0===s?void 0:s.body.start,null===(u=t.init)||void 0===u?void 0:u.body.end),(null===(c=null===(l=t.init)||void 0===l?void 0:l.body)||void 0===c?void 0:c.params)&&(O=null===(h=null===(d=t.init)||void 0===d?void 0:d.body)||void 0===h?void 0:h.params.map((function(e){return e.name}))),this.break()),"AssignmentExpression"===t.type&&(null===(f=t.left)||void 0===f?void 0:f.name)===T&&"FunctionExpression"===(null===(v=t.right)||void 0===v?void 0:v.type)&&(C=e.slice(null===(p=t.right)||void 0===p?void 0:p.body.start,null===(_=t.right)||void 0===_?void 0:_.body.end),(null===(y=t.right)||void 0===y?void 0:y.params)&&(O=null===(m=t.right)||void 0===m?void 0:m.params.map((function(e){return e.name}))),this.break())}}),C)return new(Function.bind.apply(Function,s(s([void 0],a(O),!1),[C],!1)))}}catch(e){console.log("ast eror",e)}}},e.prototype.decode_n_params=function(e){try{if(this.n_function)return this.n_function(e)}catch(e){console.log("eror",e)}},e.prototype.getTransformMap=function(e,t){var n,r,i=this.getTransformObject(e,t),o={};try{for(var s=u(i),l=s.next();!l.done;l=s.next()){var d=l.value,h=a(d.split(":",2),2),f=h[0],v=h[1],p=(0,c.parseFunction)(v);o[f]=p}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.getTransformObject=function(e,t){t=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var n,r="var ".concat(t,"={(.*?)};");try{n=new RegExp(r,"s")}catch(e){n=new RegExp("var ".concat(t,"={([\\s\\S]*?)};"))}var i=e.match(n);if(!i)throw new Error("getTransformObject: could not find match for ".concat(n));return i[1].replace(/\n/g," ").split(", ")},e.prototype.getSignature=function(e){var t,n,r=e.split("");try{for(var i=u(this.transformPlan),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.parseFunction(a),l=s.name,c=s.arg;this.transformMap[l](r,c)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("")},e.prototype.getTransformPlan=function(e){var t=this.getInitialFunctionName(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n="".concat(t,'=function\\(\\w\\){[a-zA-Z_$=\\.\\(\\"\\)\\[\\]0-9]*;(.*);(?:.+)}');return(0,c.regexSearch)(new RegExp(n),e,1).split(";")},e.prototype.getInitialFunctionName=function(e){var t,n;try{for(var r=u([[/\b([a-zA-Z0-9_$]+)&&\(\1=([a-zA-Z0-9_$]{2,})\(decodeURIComponent\(\1\)\)/,2],/([a-zA-Z0-9_$]+)\s*=\s*function\(\s*([a-zA-Z0-9_$]+)\s*\)\s*{\s*(\2)\s*=\s*(\2)\.split\(\s*""\s*\)\s*;\s*[^}]+;\s*return\s+(\2)\.join\(\s*""\s*\)/,/(?:\b|[^a-zA-Z0-9_$])([a-zA-Z0-9_$]{2,})\s*=\s*function\(\s*a\s*\)\s*{\s*a\s*=\s*a\.split\(\s*""\s*\)(?:;[a-zA-Z0-9_$]{2}\.[a-zA-Z0-9_$]{2}\(a,\d+\))?/,/\b[cs]\s*&&\s*[adf]\.set\([^,]+\s*,\s*encodeURIComponent\s*\(\s*([a-zA-Z0-9$]+)\(/,/\b[a-zA-Z0-9]+\s*&&\s*[a-zA-Z0-9]+\.set\([^,]+\s*,\s*encodeURIComponent\s*\(\s*([a-zA-Z0-9$]+)\(/,/\bm=([a-zA-Z0-9$]{2,})\(decodeURIComponent\(h\.s\)\)/,/(["\'])signature\1\s*,\s*([a-zA-Z0-9$]+)\(/,/\.sig\|\|([a-zA-Z0-9$]+)\(/,/yt\.akamaized\.net\/\)\s*\|\|\s*.*?\s*[cs]\s*&&\s*[adf]\.set\([^,]+\s*,\s*(?:encodeURIComponent\s*\()?\s*([a-zA-Z0-9$]+)\(/,/\b[cs]\s*&&\s*[adf]\.set\([^,]+\s*,\s*([a-zA-Z0-9$]+)\(/,/\bc\s*&&\s*[a-zA-Z0-9]+\.set\([^,]+\s*,\s*\([^)]*\)\s*\(\s*([a-zA-Z0-9$]+)\(/]),i=r.next();!i.done;i=r.next()){var o=i.value,a=o,s=1;Array.isArray(o)&&(a=o[0],s=o[1]);var l=e.match(a);if(l)return l[s]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("get_initial_function_name: could not find match for multiple")},e.prototype.mapFunction=function(e){var t,n,r=[[/{\w\.reverse\(\)}/,this.reverse],[/{\w\.splice\(0,\w\)}/,this.splice],[/{var\s\w=\w\[0\];\w\[0\]=\w\[\w\%\w.length\];\w\[\w\]=\w}/,this.swap],[/{var\s\w=\w\[0\];\w\[0\]=\w\[\w\%\w.length\];\w\[\w\%\w.length\]=\w}/,this.swap]];try{for(var i=u(r),o=i.next();!o.done;o=i.next()){var s=a(o.value,2),l=s[0],c=s[1];if(e.match(l))return c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new Error("map_functions: could not find match for multiple")},e.prototype.reverse=function(e){return e.reverse()},e.prototype.splice=function(e,t){return e.splice(0,t)},e.prototype.swap=function(e,t){var n=e[0];return e[0]=e[t%e.length],e[t]=n,e},e.prototype.parseFunction=function(e){var t,n;try{for(var r=u(this.jsFuncPatterns),i=r.next();!i.done;i=r.next()){var o=i.value,s=e.match(o);if(s){var l=a(s,3);return l[0],{name:l[1],arg:l[2]}}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("parse_function: could not find match for js_func_patterns")},e}();t.default=v},705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioEncodingFormat=t.VideoEncodingFormat=t.mimeMap=void 0,t.mimeMap={"3gpp":"3gp","smptett+xml":"tt","ttaf+xml":"dfxp","ttml+xml":"ttml","x-flv":"flv","x-mp4-fragmented":"mp4","x-ms-sami":"sami","x-ms-wmv":"wmv",mpegurl:"m3u8","x-mpegurl":"m3u8","vnd.apple.mpegurl":"m3u8","dash+xml":"mpd","f4m+xml":"f4m","hds+xml":"f4m","vnd.ms-sstr+xml":"ism",quicktime:"mov",mp2t:"ts","x-wav":"wav"},t.VideoEncodingFormat=["avc1","avc2","avc3","avc4","vp9","vp8","hev1","hev2","h263","h264","mp4v","hvc1","av01","theora"],t.AudioEncodingFormat=["mp4a","opus","vorbis","mp3","aac","ac-3","ec-3","eac3","dtsc","dtse","dtsh","dtsl"]},108:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryVariables=t.parseCodecs=t.mimetype2ext=t.htmlSearchMeta=t.getText=t.parseStreamDataFormat=t.parseFunction=t.parseQSL=t.parseRecommend=t.getVideoId=t.getInitialData=t.replaceQueryParam=t.regexSearch=void 0;var l=n(705),c=a(n(826));function d(e,t,n){var r=t.match(e);if(!r)throw new Error("matched regex search: ".concat(e));return r[n]}function h(e){var t;return e?(null==e?void 0:e.simpleText)||(null===(t=null==e?void 0:e.runs)||void 0===t?void 0:t.map((function(e){return e.text})).join("")):""}function f(e){if(!e)return"";var t={"audio/mp4":"m4a","audio/mpeg":"mp3"};if(e in t)return t[e];var n,r=e.split("/");try{n=r[1].split(";")[0].trim().toLowerCase()}catch(e){}return l.mimeMap[n]||n}function v(e){var t,n;if(!e)return{};var r,i,o,a=(o=e.trim(),o.replace(/^\s+|\s+$/g,"")).split(",").map((function(e){return e.trim()}));try{for(var u=s(a),c=u.next();!c.done;c=u.next()){var d=c.value,h=d.split(".")[0];if(l.VideoEncodingFormat.includes(h))r||(r=d);else{if(!l.AudioEncodingFormat.includes(h))throw new Error("WARNING: Unkonwn codec ".concat(d));i||(i=d)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return r||i?{vcodec:r||"",acodec:i||""}:2===a.length?{vcodec:a[0],acodec:a[1]}:{}}t.regexSearch=d,t.replaceQueryParam=function(e,t,n){var r=new RegExp("([?&])".concat(t,"=([^&#]*)"),"i"),i=-1!==e.indexOf("?")?"&":"?";return r.test(e)?e.replace(r,"$1".concat(t,"=").concat(n)):e+i+t+"="+n},t.getInitialData=function(e){var t,n;try{for(var r=s([/window\[['\"]ytInitialData['\"]]\s*=\s*/,/ytInitialData\s*=\s*/]),i=r.next();!i.done;i=r.next()){var o=i.value;try{return c.parseForObject(e,o)}catch(e){continue}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("initial_data: could not find match for initial_data_pattern")},t.getVideoId=function(e){return d(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/,e,1)},t.parseRecommend=function(e){var t,n,r,i,o,a,s,u,l,c,d=(null===(u=null===(s=null===(a=null===(o=null===(i=null===(r=null===(n=null===(t=null==e?void 0:e.contents)||void 0===t?void 0:t.singleColumnWatchNextResults)||void 0===n?void 0:n.results)||void 0===r?void 0:r.results)||void 0===i?void 0:i.contents[1])||void 0===o?void 0:o.shelfRenderer)||void 0===a?void 0:a.content)||void 0===s?void 0:s.horizontalListRenderer)||void 0===u?void 0:u.items)||[];function f(e){var t=["compactVideoRenderer","gridVideoRenderer"];return e.reduce((function(e,n){var r,i=Object.keys(n);if(t.includes(i[0])){var o=n[i[0]];e.push({id:null==o?void 0:o.videoId,url:"https://www.youtube.com/watch?v="+(null==o?void 0:o.videoId),title:h(null==o?void 0:o.title),thumbnails:null===(r=null==o?void 0:o.thumbnail)||void 0===r?void 0:r.thumbnails,author:h(null==o?void 0:o.shortBylineText),publishedTime:h(null==o?void 0:o.publishedTimeText),viewCountText:h(null==o?void 0:o.viewCountText),shortViewCountText:h(null==o?void 0:o.shortViewCountText),lengthText:h(null==o?void 0:o.lengthText)})}return e}),[])}var v=f(d);return 0===v.length&&(v=f(d=(null===(c=null===(l=d.find((function(e){return"itemSectionRenderer"in e})))||void 0===l?void 0:l.itemSectionRenderer)||void 0===c?void 0:c.contents)||[])),v.length,v},t.parseQSL=function(e){return e?e.split("&").reduce((function(e,t){var n=u(t.split("="),2),r=n[0],i=n[1];return e[r]=i,e}),{}):{}},t.parseFunction=function(e){var t=/function *\(([^()]*)\)[ \n\t]*{(.*)}/gim.exec(e.replace(/\n/g," "));return t?new Function(t[1].split(","),t[2]):null},t.parseStreamDataFormat=function(e){var t=null==e?void 0:e.mimeType,n={filesize:null==e?void 0:e.contentLength,width:null==e?void 0:e.width,height:null==e?void 0:e.height,type:e.mimeType,quality:e.quality,itag:e.itag,fps:null==e?void 0:e.fps,bitrate:(null==e?void 0:e.averageBitrate)||(null==e?void 0:e.bitrate)};try{if(t){var i=t.match(/((?:[^\/]+)\/(?:[^;]+))(?:;\s*codecs="([^"]+)")?/),o=f(i[1]),a=v(i[2]);n.ext=o,n=r(r({},n),a)}}catch(e){}return n},t.getText=h,t.htmlSearchMeta=function(e,t){var n,r;if(t){var i=Array.isArray(e)?e:[e];try{for(var o=s(i),a=o.next();!a.done;a=o.next()){var u=a.value,l=new RegExp("<meta(?=[^>]+(?:itemprop|name|property|id|http-equiv)=([\"\\']?)".concat(u).concat("\\1",")[^>]+?content=([\"'])(.*?)").concat("\\2"),"is");try{return d(l,t,3)}catch(e){continue}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return""}},t.mimetype2ext=f,t.parseCodecs=v,t.getQueryVariables=function(e){var t=e.split("?",2)[1],n={};if(!t)return n;var r=t.split("&");if(!r)return n;for(var i=0;i<r.length;i++){var o=r[i].split("=");o.length>1&&(n[o[0]]=o[1])}return n}},297:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Global_INNERTUBE_CLIENTS=t.audioItag=void 0;var h=n(325),f=d(n(690)),v=n(108),p=d(n(680)),_=n(148),y=d(n(671)),m=a(n(293)),b=a(n(205)),g="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0";t.audioItag=[249,250,251],t.Global_INNERTUBE_CLIENTS={web_music:{INNERTUBE_HOST:"music.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"WEB_REMIX",clientVersion:"1.20241127.01.00",hl:"en",userAgent:g}},INNERTUBE_CONTEXT_CLIENT_NAME:67},web:{INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"WEB",clientVersion:"2.20241126.01.00",hl:"en",userAgent:g}},INNERTUBE_CONTEXT_CLIENT_NAME:1},m_web:{INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"MWEB",clientVersion:"2.20241202.07.00",hl:"en",userAgent:"Mozilla/5.0 (iPad; CPU OS 16_7_10 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1,gzip(gfe)"}},INNERTUBE_CONTEXT_CLIENT_NAME:2},web_safari:{INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"WEB",clientVersion:"2.20240726.00.00",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Safari/605.1.15,gzip(gfe)",hl:"en"}},INNERTUBE_CONTEXT_CLIENT_NAME:1},android_vr:{INNERTUBE_HOST:"www.youtube.com",INNERTUBE_CONTEXT:{client:{clientName:"ANDROID_VR",clientVersion:"1.62.27",deviceMake:"Oculus",deviceModel:"Quest 3",androidSdkVersion:32,userAgent:"com.google.android.apps.youtube.vr.oculus/1.62.27 (Linux; U; Android 12L; eureka-user Build/SQ3A.220605.009.A1) gzip",osName:"Android",osVersion:"12L"}},INNERTUBE_CONTEXT_CLIENT_NAME:28}};var w=function(){function e(){this.effectiveKeys=["playerResponse","response","xsrf_token"],this.YTBParams="CgIIAQ==",this.xsrf_token="",this.homepageHTMLRes=""}return e.prototype.getHotChannelUrl=function(){var e,t,n,r,i,o,a;return s(this,void 0,void 0,(function(){var s,l,c;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,(0,p.default)("https://www.youtube.com/feed/trending",{method:"GET",headers:{"User-Agent":g}})];case 1:return(s=u.sent()).success?(l=(0,v.getInitialData)(s.data),(c=null===(a=null===(o=null===(i=null===(r=null===(n=null===(t=null===(e=null==l?void 0:l.contents)||void 0===e?void 0:e.twoColumnBrowseResultsRenderer)||void 0===t?void 0:t.tabs[1])||void 0===n?void 0:n.tabRenderer)||void 0===r?void 0:r.endpoint)||void 0===i?void 0:i.commandMetadata)||void 0===o?void 0:o.webCommandMetadata)||void 0===a?void 0:a.url).length&&(c="https://www.youtube.com"+c),[2,c]):[2];case 2:return u.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.fetchHotVideos=function(e){var t,n,r,i,o,a,l,c,d,h,f,_;return s(this,void 0,void 0,(function(){var s,y,m,b,w,T;return u(this,(function(u){switch(u.label){case 0:s={success:!1,code:0,data:[]},u.label=1;case 1:return u.trys.push([1,10,,11]),[4,(0,p.default)(e||"https://www.youtube.com/feed/trending?bp=4gINGgt5dG1hX2NoYXJ0cw%3D%3D",{method:"GET",headers:{"User-Agent":g}})];case 2:return(y=u.sent()).success?[3,6]:e?[3,5]:[4,this.getHotChannelUrl()];case 3:return(T=u.sent()).length?[4,this.fetchHotVideos(T)]:[3,5];case 4:return[2,u.sent()];case 5:return s.code=y.code,[2,s];case 6:return m=(0,v.getInitialData)(y.data),b=null===(_=null===(f=null===(h=null===(d=null===(c=null===(l=null===(a=null===(o=null===(i=null===(r=null===(n=null===(t=null==m?void 0:m.contents)||void 0===t?void 0:t.twoColumnBrowseResultsRenderer)||void 0===n?void 0:n.tabs[1])||void 0===r?void 0:r.tabRenderer)||void 0===i?void 0:i.content)||void 0===o?void 0:o.sectionListRenderer)||void 0===a?void 0:a.contents[0])||void 0===l?void 0:l.itemSectionRenderer)||void 0===c?void 0:c.contents[0])||void 0===d?void 0:d.shelfRenderer)||void 0===h?void 0:h.content)||void 0===f?void 0:f.expandedShelfContentsRenderer)||void 0===_?void 0:_.items,w=b&&b.map((function(e){var t,n=e.videoRenderer;return{id:null==n?void 0:n.videoId,url:"https://www.youtube.com/watch?v="+(null==n?void 0:n.videoId),title:(0,v.getText)(n.title),thumbnails:null===(t=n.thumbnail)||void 0===t?void 0:t.thumbnails,description:(0,v.getText)(n.descriptionSnippet),author:(0,v.getText)(n.ownerText),publishedTime:(0,v.getText)(null==n?void 0:n.publishedTimeText),viewCountText:(0,v.getText)(null==n?void 0:n.viewCountText),shortViewCountText:(0,v.getText)(null==n?void 0:n.shortViewCountText),lengthText:(0,v.getText)(null==n?void 0:n.lengthText)}})),(null==w?void 0:w.length)||e?[3,9]:[4,this.getHotChannelUrl()];case 7:return(T=u.sent()).length?[4,this.fetchHotVideos(T)]:[3,9];case 8:return[2,u.sent()];case 9:return s.success=!0,s.data=w,[2,s];case 10:return u.sent(),[2,s];case 11:return[2]}}))}))},e.prototype.getMusicChannelUrl=function(){var e;return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,p.default)("https://www.google.com/search?q=youtube+music+channel",{method:"GET",headers:{"User-Agent":g}})];case 1:return(t=n.sent()).success&&"string"==typeof t.data?[2,l((null===(e=t.data.match(/<div id="search">[\s\S]*?<a[\s\S]*?href="(.*?)"/))||void 0===e?void 0:e.splice(1))||[],1)[0]]:[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.fetchTrendingVideos=function(e){var t,n,r,i,o,a,l,c,d,h,f,_,y;return s(this,void 0,void 0,(function(){var s,m,b,w,T,E,S,x,A;return u(this,(function(u){switch(u.label){case 0:s={success:!1,code:0,data:{}},u.label=1;case 1:return u.trys.push([1,10,,11]),[4,(0,p.default)(e||"https://www.youtube.com/channel/UC-9-kyTW8ZkZNDHQJ6FgpwQ",{method:"GET",headers:{"User-Agent":g}})];case 2:return(m=u.sent()).success?[3,6]:e?[3,5]:[4,this.getMusicChannelUrl()];case 3:return(A=u.sent()).length?[4,this.fetchTrendingVideos(A)]:[3,5];case 4:return[2,u.sent()];case 5:return s.code=m.code,[2,s];case 6:return b=(0,v.getInitialData)(m.data),w=null===(o=null===(i=null===(r=null===(n=null===(t=null==b?void 0:b.contents)||void 0===t?void 0:t.twoColumnBrowseResultsRenderer)||void 0===n?void 0:n.tabs[0])||void 0===r?void 0:r.tabRenderer.content)||void 0===i?void 0:i.sectionListRenderer)||void 0===o?void 0:o.contents,T=w&&w.find((function(e){var t,n,r,i,o,a,s,u,l,c;return(null===(r=null===(n=null===(t=e.itemSectionRenderer)||void 0===t?void 0:t.contents[0])||void 0===n?void 0:n.shelfRenderer)||void 0===r?void 0:r.playAllButton)&&(null===(c=null===(l=null===(u=null===(s=null===(a=null===(o=null===(i=e.itemSectionRenderer)||void 0===i?void 0:i.contents[0])||void 0===o?void 0:o.shelfRenderer)||void 0===a?void 0:a.content)||void 0===s?void 0:s.horizontalListRenderer)||void 0===u?void 0:u.items[0])||void 0===l?void 0:l.gridVideoRenderer)||void 0===c?void 0:c.publishedTimeText)})),E=(0,v.getText)(null===(c=null===(l=null===(a=null==T?void 0:T.itemSectionRenderer)||void 0===a?void 0:a.contents[0])||void 0===l?void 0:l.shelfRenderer)||void 0===c?void 0:c.title),S=null===(y=null===(_=null===(f=null===(h=null===(d=null==T?void 0:T.itemSectionRenderer)||void 0===d?void 0:d.contents[0])||void 0===h?void 0:h.shelfRenderer)||void 0===f?void 0:f.content)||void 0===_?void 0:_.horizontalListRenderer)||void 0===y?void 0:y.items,x=S&&S.map((function(e){var t,n,r=e.gridVideoRenderer;return{id:null==r?void 0:r.videoId,url:"https://www.youtube.com/watch?v="+(null==r?void 0:r.videoId),title:(0,v.getText)(r.title),thumbnails:null===(t=r.thumbnail)||void 0===t?void 0:t.thumbnails,author:(0,v.getText)(r.shortBylineText),publishedTime:(0,v.getText)(null==r?void 0:r.publishedTimeText),viewCountText:(0,v.getText)(null==r?void 0:r.viewCountText),shortViewCountText:(0,v.getText)(null==r?void 0:r.shortViewCountText),lengthText:(0,v.getText)(null===(n=null==r?void 0:r.thumbnailOverlays[0])||void 0===n?void 0:n.thumbnailOverlayTimeStatusRenderer.text)}})),(null==x?void 0:x.length)||e?[3,9]:[4,this.getMusicChannelUrl()];case 7:return(A=u.sent()).length?[4,this.fetchTrendingVideos(A)]:[3,9];case 8:return[2,u.sent()];case 9:return s.success=!0,s.data={title:E,videos:x},[2,s];case 10:return u.sent(),[2,s];case 11:return[2]}}))}))},e.prototype.fetchChannelID=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,l;return u(this,(function(u){switch(u.label){case 0:e={success:!1,code:0,data:[]},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,(0,p.default)("https://www.youtube.com/account",{method:"GET",headers:{"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1"}})];case 2:return(t=u.sent()).success?t.responseURL&&t.responseURL.startsWith("https://accounts.google.com")?(e.code=401,[2,e]):(n=(0,v.getInitialData)(t.data),r=n.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents[1].itemSectionRenderer.contents[0].settingsOptionsRenderer.options[0].channelOptionsRenderer.avatarEndpoint.urlEndpoint,i=r.url,[4,(0,p.default)("".concat(i,"/playlists"),{method:"GET"})]):(e.code=t.code,[2,e]);case 3:return t=u.sent(),o=(0,v.getInitialData)(t.data),a=o.contents.twoColumnBrowseResultsRenderer.tabs.find((function(e){return e.tabRenderer.selected})).tabRenderer.content.sectionListRenderer.contents||[],s=(s=a.map((function(e){var t=Object.keys(e)[0];return"itemSectionRenderer"===t&&(0,h.parseSectionData)(e[t].contents[0])})).filter((function(e){return e})))[0].content,l=[],s.forEach((function(e){l.push(e.playlistId)})),e.success=!0,e.data=l,[2,e];case 4:return u.sent(),[2,e];case 5:return[2]}}))}))},e.prototype.getAndroidPOSTBody=function(e,t,n,i){return void 0===i&&(i=!0),s(this,void 0,void 0,(function(){var o,a;return u(this,(function(s){switch(s.label){case 0:return[4,new Promise((function(e){App.fetchPotTokenThen(!1,(function(t){return e(t)}))}))];case 1:return o=s.sent(),a=o&&i?{serviceIntegrityDimensions:{poToken:o}}:{},[2,r({context:r({},t),videoId:e,playbackContext:{contentPlaybackContext:r({html5Preference:"HTML5_PREF_WANTS"},n?{signatureTimestamp:Number(n)}:{})},contentCheckOk:!0,racyCheckOk:!0},a)]}}))}))},e.prototype.getInnertubeClient=function(e){return s(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("INNERTUBE_CLIENTS",(function(t){return e(t)}))}))];case 1:return n=o.sent(),r=t.Global_INNERTUBE_CLIENTS,(i=!!n&&JSON.parse(n))&&Object.keys(i).length>0&&i[e]&&(r=i),[2,r[e]]}}))}))},e.prototype.queryVideoWithClient=function(e,t,n){var i,o,a;return void 0===n&&(n=!0),s(this,void 0,void 0,(function(){var s,c,d,h,f,b,g,w,T,E,S,x,A,R,I,C,O,P,N,M,L,k,D,U,j,H,B,F,V,G,W,Y,q,z,X,Z,$,J;return u(this,(function(u){switch(u.label){case 0:return s="",[4,this.getAppLanguage()];case 1:return c=(c=u.sent()||"en").split("-")[0]||c,[4,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("YTBParams",(function(t){return e(t)}))}))];case 2:(d=u.sent())&&(this.YTBParams=d);try{s=(0,v.getVideoId)(e)}catch(e){return[2,{success:!1,code:_.Err_Code_Video_ID_Failed}]}return[4,this.getInnertubeClient(t)];case 3:return h=u.sent(),f=h.INNERTUBE_CONTEXT,b={success:!1},g="","web_music"!=t?[3,5]:[4,y.default.getMusicWatchHTML()];case 4:return w=u.sent(),E=w.success,S=w.data,Z=w.code,E&&S?(g=S,[3,7]):[2,r(r({},b),{code:Z})];case 5:return[4,y.default.getWatchHTML(s,("web_safari"===t||"android_vr"===t)&&(null===(i=f.client)||void 0===i?void 0:i.userAgent))];case 6:if(T=u.sent(),E=T.success,S=T.data,Z=T.code,!E||!S)return[2,r(r({},b),{code:Z})];g=S,u.label=7;case 7:return x=h.INNERTUBE_HOST,A=h.INNERTUBE_CONTEXT_CLIENT_NAME,R=f.client.clientVersion,"web"!==t&&"web_music"!==t&&"web_safari"!==t&&"android_vr"!==t||(I=m.extract_context(g),f=r(r({},I||{}),{client:r(r(r({},I.client||{}),f.client),{hl:c})})),C="",[4,y.default.getPlayerJSCode(g)];case 8:return O=l.apply(void 0,[u.sent(),1]),(P=O[0])&&(N=P.match("(?:signatureTimestamp|sts)\\s*:\\s*([0-9]{5})"))&&N[1]&&(C=N[1]),M=null===(o=f.client)||void 0===o?void 0:o.userAgent,L="https://".concat(x),k=null===(a=f.client)||void 0===a?void 0:a.visitorData,(D="android_vr"!==t)?[4,m.extract_auth(g,L)]:[3,10];case 9:D=u.sent(),u.label=10;case 10:return U=r({"X-YouTube-Client-Name":A,"X-YouTube-Client-Version":R,"User-Agent":M,"content-type":"application/json",Origin:L},D||{}),k&&(U["X-Goog-Visitor-Id"]=k),B=(H=Promise).all,F=[Promise.resolve({success:!0,data:!1})],V=p.default,G=["https://".concat(x,"/youtubei/v1/player")],J={method:"POST",headers:U},[4,this.getAndroidPOSTBody(s,f,C,n)];case 11:return[4,B.apply(H,[F.concat([V.apply(void 0,G.concat([(J.body=u.sent(),J)]))])])];case 12:if(!(j=u.sent())[0].success||!j[1].success)return 400===j[1].code?[2,{success:!1,code:_.Err_Code_Request_Params_Failed}]:[2,{success:!1,code:_.Err_Code_Get_Video_Info_Failed}];W=j.map((function(e){return e.data})),Y={playerResponse:W[1],initialData:W[0]},q=null,u.label=13;case 13:return u.trys.push([13,15,,16]),[4,this.handleInfo(Y,!1,n,g)];case 14:return q=u.sent(),[3,16];case 15:return z=u.sent(),(X=z)&&X instanceof Error&&((Z=Number(X.name))===_.Err_Code_N_Function_Failed||Z===_.Err_Code_Signature_Failed)?[2,{success:!1,code:Z}]:[2,{success:!1,code:_.Err_Code_Parse_Video_Failed}];case 16:return($=((null==q?void 0:q.data)||{}).id)&&$!==s?[2,{success:!1,code:_.Err_Code_Video_UNPLAYABLE}]:[2,{success:q.success,code:q.code,data:r(r({},(null==q?void 0:q.data)||{}),{id:s,url:e})}]}}))}))},e.prototype.getAppLanguage=function(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){App.fetchAppInfoToNativeThen("lang",(function(t){e(t)}))}))]}))}))},e.prototype.isVideoForbidden=function(e,n,r){var i;return s(this,void 0,void 0,(function(){var o,a,s,l,c;return u(this,(function(u){switch(u.label){case 0:return(null==e?void 0:e.allTarget)||(null==e?void 0:e.formatId)&&t.audioItag.includes(e.formatId)?!(o=null===(i=null==n?void 0:n.formats)||void 0===i?void 0:i.find((function(e){return t.audioItag.includes(e.itag)})))||r?[3,2]:[4,(0,p.default)(o.url,{method:"HEAD"})]:[3,2];case 1:if(a=u.sent(),s=a.success,l=a.code,c=a.errorMsg,!s&&(403===l||(null==c?void 0:c.includes("403"))))return[2,!0];u.label=2;case 2:return[2,!1]}}))}))},e.prototype.queryVideoInfo=function(e,t,n,r){var i;return void 0===n&&(n=!0),s(this,void 0,void 0,(function(){var o,a,s,c,d,h,f,v;return u(this,(function(u){switch(u.label){case 0:return t?[2,this.queryVideoWithClient(e,"web_safari")]:[4,b.isSupportPotoken()];case 1:return o=u.sent(),a=/music.youtube.com/.test(e),o&&n?[4,this.queryVideoWithClient(e,a?"web_music":"android_vr")]:[3,6];case 2:return(s=u.sent()).success&&s.data?[4,this.isVideoForbidden(r,s.data,!1)]:[3,4];case 3:return u.sent()?(App.fetchPotTokenThen(!0,(function(){})),[2,this.queryVideoInfo(e,t,!1,r)]):[3,5];case 4:if(s.code===_.Err_Code_Request_Params_Failed)return[2,this.queryVideoInfo(e,t,!1,r)];u.label=5;case 5:return[2,s];case 6:return c={success:!1},[4,Promise.all([this.queryVideoWithClient(e,"android_vr",!1),a?this.queryVideoWithClient(e,"web_music",!1):c])];case 7:return d=l.apply(void 0,[u.sent(),2]),h=d[0],(f=d[1]).success&&(v=null===(i=f.data)||void 0===i?void 0:i.thumbnails)&&(null==h?void 0:h.data)&&(h.data.thumbnails=v),[2,h]}}))}))},e.prototype.handleInfo=function(e,t,n,i){var o,a,d,h,m,b,g,w;return void 0===n&&(n=!0),void 0===i&&(i=""),s(this,void 0,void 0,(function(){var s,T,E,S,x,A,R,I,C,O,P,N,M,L,k,D,U,j,H,B,F,V,G,W,Y,q,z,X,Z,$,J,K,Q,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,de,he,fe,ve,pe,_e,ye,me,be,ge,we,Te,Ee,Se,xe,Ae,Re,Ie,Ce,Oe,Pe,Ne,Me,Le,ke,De,Ue,je,He,Be,Fe,Ve,Ge,We,Ye,qe,ze;return u(this,(function(u){switch(u.label){case 0:if(console.log("obj",e),s=e.playerResponse,T=e.initialData,E=s.playabilityStatus||{},S={status:null,info:[]},!t){if("status"in E&&("reason"in E&&(S={status:E.status,info:[E.reason]}),"message"in E&&(S={status:E.status,info:E.message})),"ERROR"===S.status)return[2,{success:!1,code:_.Err_Code_Video_Unavailable}];if("LOGIN_REQUIRED"===S.status)return[2,{success:!1,code:_.Err_Code_Video_Login_Required}];if("UNPLAYABLE"===S.status)return[2,{success:!1,code:_.Err_Code_Video_UNPLAYABLE}]}return x=s.videoDetails||{},A=(null===(o=null==s?void 0:s.microformat)||void 0===o?void 0:o.playerMicroformatRenderer)||{},R=(null==x?void 0:x.title)||(0,v.getText)(null==A?void 0:A.title),I=null==x?void 0:x.shortDescription,C=[],O=[],P={},M=s.streamingData||{},L=(L=M.formats||[]).concat(M.adaptiveFormats||[]),k=x.isLive,[4,new Promise((function(e){App.fetchPotTokenThen(!1,(function(t){return e(t)}))}))];case 1:return D=u.sent(),t?[3,5]:[4,y.default.getPlayerJSCode(i)];case 2:if(U=l.apply(void 0,[u.sent(),2]),j=U[0],H=U[1],!j)throw new Error("js player code error");try{for(B=c(L),F=B.next();!F.done;F=B.next())if(!(null==(V=F.value)?void 0:V.targetDurationSec)&&!(null==V?void 0:V.drmFamilies)&&(_e=(null==V?void 0:V.itag)||"",G=V.quality,_e&&G&&(P[_e]=G),"FORMAT_STREAM_TYPE_OTF"!==V.type)){if(!(W=V.url)){if(N||j&&(N=new f.default(j,H)),Y=(0,v.parseQSL)(V.signatureCipher),W=Y.url,q=Y.s,!W||!q)continue;try{if(!(z=N.getSignature(decodeURIComponent(q))))throw new Error("signature failed");X=Y.sp||"signature",W="".concat(decodeURIComponent(W),"&").concat(X,"=").concat(z)}catch(e){throw(J=new Error(e.message)).name=String(_.Err_Code_Signature_Failed),J}}if((Z=(0,v.parseQSL)(W)).n){if(N||j&&(N=new f.default(j,H)),!($=N.decode_n_params(Z.n)))throw(J=new Error("decode n params error")).name=String(_.Err_Code_N_Function_Failed),J;W=(0,v.replaceQueryParam)(W,"n",$)}if(D&&n&&(W="".concat(W,"&pot=").concat(D)),_e&&O.push(_e),fe=V.averageBitrate||V.bitrate,Ee={filesize:null==V?void 0:V.contentLength,width:null==V?void 0:V.width,height:null==V?void 0:V.height,type:V.mimeType,quality:V.quality,itag:V.itag,fps:null==V?void 0:V.fps,bitrate:(null==V?void 0:V.averageBitrate)||(null==V?void 0:V.bitrate),url:W},K=V.mimeType)try{Q=K.match(/((?:[^\/]+)\/(?:[^;]+))(?:;\s*codecs="([^"]+)")?/),ee=(0,v.mimetype2ext)(Q[1]),te=(0,v.parseCodecs)(Q[2]),Ee.ext=ee,Ee=r(r({},Ee),te)}catch(e){}ne=!!(null==Ee?void 0:Ee.acodec),re=!!(null==Ee?void 0:Ee.vcodec),ne&&(Ee.vbr=fe),re&&(Ee.abr=fe),(re||ne)&&Ee.ext&&(Ee.container=Ee.ext+"_dash"),C.push(Ee)}}catch(e){Be={error:e}}finally{try{F&&!F.done&&(Fe=B.return)&&Fe.call(B)}finally{if(Be)throw Be.error}}return(ie=M.hlsManifestUrl)?(D&&n&&(ie.endsWith("/")&&(ie=ie.slice(0,-1)),ie+="/pot/".concat(D)),[4,(0,p.default)(ie)]):[3,4];case 3:if(oe=u.sent(),ae=oe.success,se=oe.data,ae&&"string"==typeof se&&-1===se.indexOf("#EXT-X-TARGETDURATION")){ue=se.split("\n"),le={};try{for(ce=c(ue),de=ce.next();!de.done;de=ce.next())if((he=de.value).startsWith("#EXT-X-STREAM-INF:"))le=null===(a=he.match(/([A-Z0-9-]+)=("[^"]+"|[^",]+)(?:,|$)/g))||void 0===a?void 0:a.reduce((function(e,t){var n=l(t.match(/([A-Z0-9-]+)=("[^"]+"|[^",]+)(?:,|$)/).splice(1),2),r=n[0],i=n[1];return e[r]=i,e}),{});else{if(he.startsWith("#")||!he.trim())continue;fe=le["AVERAGE-BANDWIDTH"]||le.BANDWIDTH,(ve=he.trim())&&(pe=l(null===(d=ve.match(/itag\/(\d+)/))||void 0===d?void 0:d.splice(1),1),_e=pe[0],ye=l(null===(m=null===(h=le.RESOLUTION)||void 0===h?void 0:h.match(/(\d+)[xX](\d+)/))||void 0===m?void 0:m.splice(1),2),me=ye[0],be=ye[1],ge=l(null===(b=le.CODECS)||void 0===b?void 0:b.split(","),2),we=ge[0],Te=ge[1],Ee={width:me,height:be,ext:"mp4",vcodec:we,acodec:Te,itag:Number(_e),url:ve,tbr:fe,fps:parseFloat(le["FRAME-RATE"]||0)},C.push(Ee))}}catch(e){Ve={error:e}}finally{try{de&&!de.done&&(Ge=ce.return)&&Ge.call(ce)}finally{if(Ve)throw Ve.error}}}u.label=4;case 4:if(0===C.length){if(M.licenseInfos)throw new Error("This video is DRM protected");throw Se=(null===(g=null==E?void 0:E.errorScreen)||void 0===g?void 0:g.playerErrorMessageRenderer)||{},xe=(0,v.getText)(null==Se?void 0:Se.reason)||(null==E?void 0:E.reason),(Ae=(0,v.getText)(Se.subreason))&&(xe+=","+Ae),new Error(xe||"formats list is empty")}u.label=5;case 5:Re=[];try{for(Ie=c([x,A]),Ce=Ie.next();!Ce.done;Ce=Ie.next()){Oe=Ce.value;try{for(qe=void 0,Pe=c((null===(w=null==Oe?void 0:Oe.thumbnail)||void 0===w?void 0:w.thumbnails)||[]),Ne=Pe.next();!Ne.done;Ne=Pe.next())Me=Ne.value,(Le=null==Me?void 0:Me.url)&&Re.push({height:null==Me?void 0:Me.height,url:Le,width:null==Me?void 0:Me.width})}catch(e){qe={error:e}}finally{try{Ne&&!Ne.done&&(ze=Pe.return)&&ze.call(Pe)}finally{if(qe)throw qe.error}}if(Re.length>0)break}}catch(e){We={error:e}}finally{try{Ce&&!Ce.done&&(Ye=Ie.return)&&Ye.call(Ie)}finally{if(We)throw We.error}}ke=null==A?void 0:A.category,De=(null==x?void 0:x.channelId)||(null==A?void 0:A.externalChannelId),Ue=(null==x?void 0:x.lengthSeconds)||(null==A?void 0:A.lengthSeconds),je=[];try{T&&(je=T.contents.twoColumnWatchNextResults.results.results.contents[1].videoSecondaryInfoRenderer.owner.videoOwnerRenderer.thumbnail.thumbnails)}catch(e){}return He={isLive:Boolean(k),title:R,formats:C,thumbnails:Re,description:I,category:ke||[],duration:Ue,viewCount:x.viewCount||A.viewCount,keywords:x.keywords,averageRating:x.averageRating,author:x.author,channelID:De,recommendInfo:T?(0,v.parseRecommend)(T):[],avatar:je,id:x.videoId},De&&(He.channelURL="https://www.youtube.com/channel/"+De),[2,{success:!0,data:He}]}}))}))},e}();t.default=new w},826:(e,t)=>{"use strict";function n(e,t){var n=e.substr(t);if("{"!==n[0])throw new Error("Invalid start point");for(var r=["{"],i=1,o={"{":"}","[":"]",'"':'"'};i<n.length&&0!==r.length;){var a=n[i],s=r[r.length-1];if(a!==o[s]){if('"'===s){if("\\"===a){i+=2;continue}}else a in o&&r.push(a);i+=1}else r.pop(),i+=1}return n.substr(0,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseForObjectFromStartpoint=t.parseForObject=void 0,t.parseForObject=function(e,t,r){var i=e.match(t);if(!i)throw new Error("No matches for regex ".concat(t));var o=!!r,a=n(e,i.index+i[0].length+o);try{return JSON.parse(a)}catch(e){throw new Error("could not parse object.")}},t.parseForObjectFromStartpoint=n},795:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getYouTubeChannelMusicLayout=t.getYouTubeMusicHome=t.getYouTubeMusicChannelPlayList=t.getYouTubeMusicCharts=t.getYouTubeMusicPlayList=t.getVideoFromPlayList=void 0;var h=d(n(680)),f=n(108),v=a(n(752)),p=n(325),_=n(297);function y(){return s(this,void 0,void 0,(function(){return u(this,(function(e){return[2,new Promise((function(e){App.fetchAppInfoToNativeThen("lang",(function(t){e(t)}))}))]}))}))}function m(e,t,n){return s(this,void 0,void 0,(function(){var i,o,a,s,l,c,d;return u(this,(function(u){switch(u.label){case 0:return[4,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("INNERTUBE_CLIENTS",(function(t){return e(t)}))}))];case 1:return i=u.sent(),(o=!!i&&JSON.parse(i))&&o.web||(o=r({},_.Global_INNERTUBE_CLIENTS)),a=o.web.INNERTUBE_CONTEXT.client,[4,y()];case 2:return s=u.sent(),a.hl=s,[4,(0,h.default)("https://www.youtube.com/youtubei/v1/browse?prettyPrint=false",{method:"POST",headers:{"content-type":"application/json"},body:{context:{client:a},continuation:t}})];case 3:return l=u.sent(),c=l.success,d=l.data,c&&d?[2,b(e,d,n)]:[2]}}))}))}function b(e,t,n){var r,i,o,a,s,u,l,c,d,h,v,p,_,y,m,b,g,w,T,E,S,x,A,R,I,C;if(t){var O=(null===(o=null===(i=null===(r=null==t?void 0:t.contents)||void 0===r?void 0:r.twoColumnWatchNextResults)||void 0===i?void 0:i.playlist)||void 0===o?void 0:o.playlist)||(null===(d=null===(c=null===(l=null===(u=null===(s=null===(a=null==t?void 0:t.contents)||void 0===a?void 0:a.twoColumnBrowseResultsRenderer)||void 0===s?void 0:s.tabs[0])||void 0===u?void 0:u.tabRenderer)||void 0===l?void 0:l.content)||void 0===c?void 0:c.sectionListRenderer)||void 0===d?void 0:d.contents)||(null===(h=null==t?void 0:t.onResponseReceivedActions[0])||void 0===h?void 0:h.appendContinuationItemsAction),P=O&&(null===(y=null===(_=null===(p=null===(v=O[0])||void 0===v?void 0:v.itemSectionRenderer)||void 0===p?void 0:p.contents[0])||void 0===_?void 0:_.playlistVideoListRenderer)||void 0===y?void 0:y.contents)||(null==O?void 0:O.continuationItems)||(null==O?void 0:O.contents),N=null===(m=null==t?void 0:t.microformat)||void 0===m?void 0:m.microformatDataRenderer,M="",L=null==P?void 0:P.map((function(e){var t,r,i,o;if("playlistPanelVideoRenderer"in e||"playlistVideoRenderer"in e){var a=e.playlistPanelVideoRenderer||e.playlistVideoRenderer;return!a.unplayableText&&{id:a.videoId,url:n?"https://music.youtube.com/watch?v="+a.videoId:"https://www.youtube.com/watch?v="+a.videoId,thumbnails:null===(t=null==a?void 0:a.thumbnail)||void 0===t?void 0:t.thumbnails,title:(0,f.getText)(a.title),lengthText:(0,f.getText)(a.lengthText),author:(0,f.getText)(a.shortBylineText)}}if(!("continuationItemRenderer"in e))return!1;M=null===(o=null===(i=null===(r=e.continuationItemRenderer)||void 0===r?void 0:r.continuationEndpoint)||void 0===i?void 0:i.continuationCommand)||void 0===o?void 0:o.token})).filter((function(e){return e}));return{next:M,id:e,title:(null==P?void 0:P.title)||(null===(g=null===(b=null==t?void 0:t.metadata)||void 0===b?void 0:b.playlistMetadataRenderer)||void 0===g?void 0:g.title)||(null==O?void 0:O.title),description:(null===(T=null===(w=null==t?void 0:t.metadata)||void 0===w?void 0:w.playlistMetadataRenderer)||void 0===T?void 0:T.description)||(null==N?void 0:N.description),thumbnails:null===(E=null==N?void 0:N.thumbnail)||void 0===E?void 0:E.thumbnails,creator:(null===(A=null===(x=null===(S=null==t?void 0:t.header)||void 0===S?void 0:S.playlistHeaderRenderer)||void 0===x?void 0:x.subtitle)||void 0===A?void 0:A.simpleText)||(null===(R=null==P?void 0:P.ownerName)||void 0===R?void 0:R.simpleText)||(0,f.getText)(null===(C=null===(I=null==t?void 0:t.header)||void 0===I?void 0:I.playlistHeaderRenderer)||void 0===C?void 0:C.ownerText)||(0,f.getText)(null==O?void 0:O.ownerName),contents:L}}}t.getVideoFromPlayList=function(e,n,i,o){return s(void 0,void 0,void 0,(function(){var o,a,s,d,v,p,_,y,g,w,T,E,S,x,A;return u(this,(function(R){switch(R.label){case 0:if(o=(0,f.getQueryVariables)(e),!(a=null==o?void 0:o.list))throw new Error("[youtube playlist] not a valid URL");return s="https://www.youtube.com/".concat(n?"playlist":"watch","?list=").concat(a).concat(i?"&v="+i:""),[4,(0,h.default)(s,{method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:89.0) Gecko/20100101 Firefox/89.0"}})];case 1:if(!(d=R.sent()).success)throw new Error("[youtube playlist] fetch error");if(v=d.data,p=(0,f.getInitialData)(v),_=b(a,p,n),y=null==_?void 0:_.next,g=0,y||i||!((null===(x=null==_?void 0:_.contents)||void 0===x?void 0:x.length)>=200))return[3,5];w=c([],l(_.contents),!1),T=function(){var r,i,o,a;return u(this,(function(s){switch(s.label){case 0:return g++,(r=null===(A=w.pop())||void 0===A?void 0:A.id)?[4,(0,t.getVideoFromPlayList)(e,n,r)]:[2,"break"];case 1:return i=s.sent(),o=new Set(w.map((function(e){return e.id}))),a=i.contents.filter((function(e){if(!o.has(e.id))return!0})),w.push.apply(w,c([],l(a),!1)),a.length<200?[2,"break"]:[2]}}))},R.label=2;case 2:return g<10?[5,T()]:[3,4];case 3:return"break"===R.sent()?[3,4]:[3,2];case 4:_.contents=w,R.label=5;case 5:return y&&!i&&g<10?(g++,[4,m(a,y,n)]):[3,7];case 6:return E=R.sent(),y===(null==E?void 0:E.next)?[3,7]:(y=null==E?void 0:E.next,(null==E?void 0:E.contents)&&(_=r(r({},_),{contents:c(c([],l(_.contents),!1),l(E.contents),!1)})),[3,5]);case 7:return _.contents&&(S=new Set(_.contents.map((function(e){return e.id}))),_.contents=_.contents.filter((function(e){if(S.has(e.id))return S.delete(e.id),!0}))),[2,_]}}))}))},t.getYouTubeMusicPlayList=function(e){return s(void 0,void 0,void 0,(function(){var n,r,i,o,a;return u(this,(function(s){switch(s.label){case 0:if(n=(0,f.getQueryVariables)(e),!(r=null==n?void 0:n.list))throw new Error("[youtubeMusic playlist] not a valid URL");s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,t.getVideoFromPlayList)(e,!0)];case 2:return[2,s.sent()];case 3:return s.sent(),[3,4];case 4:return[4,v.core.get(v.MusicPagePosition.SPECIAL_PARSE_PLAYLIST,e)];case 5:return i=s.sent()||[],[2,{id:r,title:null===(o=i[0])||void 0===o?void 0:o.title,thumbnails:null===(a=i[0])||void 0===a?void 0:a.thumbnails,contents:i}]}}))}))},t.getYouTubeMusicCharts=function(e){return s(void 0,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,v.core.getChartsWithCountry(e)];case 1:return[2,t.sent()]}}))}))},t.getYouTubeMusicChannelPlayList=function(e){return s(void 0,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:if(!(t=e.split("/"))[t.length-1].startsWith("MPREb_"))throw new Error("[youtubeMusicChannel playlist] not a valid URL");return[4,v.core.get(v.MusicPagePosition.SPECIAL_PARSE_CHANNEL_PLAYLIST,e)];case 1:return[2,n.sent()]}}))}))},t.getYouTubeMusicHome=function(){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,v.core.get(v.MusicPagePosition.HOME_PAGE)];case 1:return[2,e.sent()]}}))}))},t.getYouTubeChannelMusicLayout=function(){return s(void 0,void 0,void 0,(function(){var e,t,n,r;return u(this,(function(i){switch(i.label){case 0:return[4,(0,h.default)("https://www.youtube.com/channel/UC-9-kyTW8ZkZNDHQJ6FgpwQ",{method:"GET"})];case 1:if(!(e=i.sent()).success)throw new Error("[youtube channel: music] fetch error");t=e.data,n=(0,f.getInitialData)(t),r=[];try{r=n.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents||[]}catch(e){}if(0===r.length)throw new Error("could find sectionList");return[2,r.map((function(e){var t=Object.keys(e)[0];return"itemSectionRenderer"===t&&(0,p.parseSectionData)(e[t].contents[0])})).filter((function(e){return e}))]}}))}))}},713:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=n(325),h=c(n(680)),f=o(n(108)),v=n(148),p="Mozilla/5.0 (iPhone; CPU iPhone OS 14_2_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.1 Mobile/15E148 Safari/604.1",_="https://m.youtube.com",y=function(e){return e.map((function(e){var t,n,r,i=Object.keys(e)[0],o=e[i];switch(i){case"compactVideoRenderer":case"videoWithContextRenderer":return{type:"video",data:{id:null==(r=o)?void 0:r.videoId,url:"https://www.youtube.com/watch?v="+(null==r?void 0:r.videoId),title:f.getText((null==r?void 0:r.title)||(null==r?void 0:r.headline)),thumbnails:null===(t=null==r?void 0:r.thumbnail)||void 0===t?void 0:t.thumbnails,author:f.getText(null==r?void 0:r.shortBylineText),publishedTime:f.getText(null==r?void 0:r.publishedTimeText),viewCountText:f.getText(null==r?void 0:r.viewCountText),shortViewCountText:f.getText(null==r?void 0:r.shortViewCountText),lengthText:f.getText(null==r?void 0:r.lengthText)}};case"horizontalCardListRenderer":var a=null==o?void 0:o.cards.map((function(e){var t,n=Object.keys(e)[0],r=e[n];return"searchRefinementCardRenderer"===n?{thumbnails:null===(t=null==r?void 0:r.thumbnail)||void 0===t?void 0:t.thumbnails,title:f.getText(null==r?void 0:r.query),url:"https://www.youtube.com/playlist?list=".concat(r.searchEndpoint.watchPlaylistEndpoint.playlistId)}:{}}));return{type:"albums",data:a};case"compactPlaylistRenderer":return{type:"playlist",data:{id:null==(r=o)?void 0:r.playlistId,url:"https://www.youtube.com/playlist?list="+(null==r?void 0:r.playlistId),title:f.getText(null==r?void 0:r.title),thumbnails:null===(n=null==r?void 0:r.thumbnail)||void 0===n?void 0:n.thumbnails,author:f.getText(null==r?void 0:r.shortBylineText),videoCountShortText:f.getText(null==r?void 0:r.videoCountShortText),videoCountText:f.getText(null==r?void 0:r.videoCountText)}};default:return}})).filter((function(e){return!!e}))},m=function(){function e(){this.initStatus="pending",this.initPromise=null}return e.prototype.startInitStatus=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return this.initPromise&&"failure"!==this.initStatus||(this.initPromise=new Promise((function(t){e.init().then((function(){"success"===e.initStatus?t(!0):t(!1)})).catch((function(){return t(!1)}))}))),[4,this.initPromise];case 1:return[2,t.sent()]}}))}))},e.prototype.getInitPrommise=function(){return this.initPromise},e.prototype.init=function(){return a(this,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:return this.initStatus="pending",[4,(0,h.default)(_,{method:"GET",headers:{"User-Agent":p},credentials:!1})];case 1:if(!(e=n.sent()).success)return this.initStatus="failure",[2];try{t=(0,d.parseYtcfg)(e.data,{isYouTube:!0}).ytcfg,this.ytcfg=t}catch(e){return this.initStatus="failure",[2]}return this.initStatus="success",[2]}}))}))},e.prototype.go=function(e,t){return a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.startInitStatus()];case 1:return n.sent()?[4,this.toSearch(e,t)]:[3,3];case 2:return[2,n.sent()];case 3:return[2,{data:[],isReady:!1,code:500,success:!1}]}}))}))},e.prototype.toSearch=function(e,t){var n,r;return a(this,void 0,void 0,(function(){var i,o,a,l,c,d,m,b,g,w,T,E,S,x,A,R,I;return s(this,(function(s){switch(s.label){case 0:i={isReady:!0,code:200,success:!1},o={"User-Agent":p,Referer:"https://m.youtube.com/","X-YouTube-Client-Name":this.H("INNERTUBE_CONTEXT_CLIENT_NAME"),"X-YouTube-Client-Version":this.H("INNERTUBE_CONTEXT_CLIENT_VERSION"),"X-YouTube-Device":this.H("DEVICE"),"X-YouTube-Page-CL":this.H("PAGE_CL"),"X-YouTube-Page-Label":this.H("PAGE_BUILD_LABEL"),"X-YouTube-Utc-Offset":String(-(new Date).getTimezoneOffset())};try{a=(new Intl.DateTimeFormat).resolvedOptions().timeZone}catch(e){}a&&(o["X-YouTube-Time-Zone"]=a),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,h.default)("https://m.youtube.com/results?search_query=".concat(encodeURIComponent(e),"&pbj=1").concat(t==v.JSBridgePayloadSearchFilter.Playlist?"&sp=EgIQAw%3D%3D":t==v.JSBridgePayloadSearchFilter.Track?"&sp=EgIQAQ%253D%253D":""),{method:"GET",headers:o,credentials:!1})];case 2:if(l=s.sent(),c=l.data,d=l.success,m=l.errorMsg,!d)throw new Error("NetWork Error:"+m);b=c.response.contents.sectionListRenderer.contents,g={};try{for(w=u(b),T=w.next();!T.done;T=w.next())switch(E=T.value,S=Object.keys(E)[0],x=E[S],S){case"universalWatchCardRenderer":try{g.head={avatar:null===(r=null===(n=x.header.watchCardRichHeaderRenderer.avatar.thumbnails)||void 0===n?void 0:n.pop())||void 0===r?void 0:r.url,title:f.getText(x.header.watchCardRichHeaderRenderer.title),author:f.getText(x.header.watchCardRichHeaderRenderer.subtitle),coverTitle:f.getText(x.callToAction.watchCardHeroVideoRenderer.callToActionButton.callToActionButtonRenderer.label),url:_+x.callToAction.watchCardHeroVideoRenderer.navigationEndpoint.commandMetadata.webCommandMetadata.url,thumbnails:Object.values(x.callToAction.watchCardHeroVideoRenderer.heroImage.collageHeroImageRenderer||{}).map((function(e){var t,n;return null===(n=null===(t=e.thumbnails)||void 0===t?void 0:t.pop())||void 0===n?void 0:n.url})),channelURL:_+x.header.watchCardRichHeaderRenderer.titleNavigationEndpoint.commandMetadata.webCommandMetadata.url}}catch(e){}break;case"itemSectionRenderer":g.contents=y(x.contents||[]);break;case"continuationItemRenderer":g.next=x.continuationEndpoint.continuationCommand.token}}catch(e){R={error:e}}finally{try{T&&!T.done&&(I=w.return)&&I.call(w)}finally{if(R)throw R.error}}return i.data=g,i.success=!0,[3,4];case 3:return(A=s.sent())instanceof Error&&A.message.startsWith("NetWork Error:")?i.errorCode=400:i.errorCode=500,i.data={},[3,4];case 4:return[2,i]}}))}))},e.prototype.nextPage=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o,a,u,c,d,f,v,p,_,m;return s(this,(function(s){switch(s.label){case 0:return[4,this.startInitStatus()];case 1:if(!s.sent())return[2,{success:!1,code:500,data:[]}];t={isReady:!0,code:200,success:!1},s.label=2;case 2:return s.trys.push([2,4,,5]),n="https://m.youtube.com/youtubei/v1/search?key=".concat(this.H("INNERTUBE_API_KEY")),[4,(0,h.default)(n,{method:"POST",headers:{"content-type":"application/json"},body:{context:this.H("INNERTUBE_CONTEXT"),continuation:e},credentials:!1})];case 3:if(r=s.sent(),i=r.data,o=r.success,a=r.errorMsg,!o)throw new Error("NetWork Error:"+a);return u={},c=l(i.onResponseReceivedCommands[0].appendContinuationItemsAction.continuationItems,2),d=c[0],f=c[1],v=void 0,p=void 0,d&&(v=d.itemSectionRenderer,u.contents=y(v.contents)),f&&(p=f.continuationItemRenderer,_=p.continuationEndpoint.continuationCommand.token,u.next=_),t.data=u,t.success=!0,[3,5];case 4:return(m=s.sent())instanceof Error&&m.message.startsWith("NetWork Error:")?t.errorCode=400:t.errorCode=500,t.data={},[3,5];case 5:return[2,t]}}))}))},e.prototype.H=function(e,t){void 0===t&&(t="");var n=this.ytcfg&&this.ytcfg.data_||{};return e in n?n[e]:t},e}();t.default=new m},293:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecommend=t.applySignature=t.applyDescrambler=t.getYtplayerJS=t.getYtplayerConfig=t.initialData=t.videoInfoURL=t.jsURL=t.extract_auth=t.extract_client=t.extract_dataSyncId=t.extract_context=t.extract_ytcfg=t.videoInfoUrlAgeRestricted=t.isAgeRestricted=t.ytInitialGuideResponse=t.initialPlayerResponse=t.playabilityStatus=t.videoId=void 0;var h=d(n(690)),f=a(n(108)),v=a(n(826)),p=n(423);function _(e){var t,n;try{for(var r=l([/window\[['\"]ytInitialPlayerResponse['\"]]\s*=\s*/,/ytInitialPlayerResponse\s*=\s*/]),i=r.next();!i.done;i=r.next()){var o=i.value;try{return v.parseForObject(e,o)}catch(e){continue}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("initial_player_response: could not find match for initial_player_response_pattern")}function y(e){return"https://www.youtube.com/get_video_info?"+Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}function m(e){var t=e.match("ytcfg\\.set\\s*\\(\\s*({.+?})\\s*\\)\\s*;");if(t&&t[1])try{return JSON.parse(t[1])}catch(e){}}t.videoId=function(e){return f.regexSearch(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/,e,1)},t.playabilityStatus=function(e){var t=_(e),n=(null==t?void 0:t.playabilityStatus)||{};if("status"in n){if("reason"in n)return{status:n.status,info:[n.reason]};if("message"in n)return{status:n.status,info:n.message}}return{status:null,info:[],playerResponse:t}},t.initialPlayerResponse=_,t.ytInitialGuideResponse=function(e){var t,n,r=e.replace(/\\x(\w{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}));try{for(var i=l([/window\[['\"]ytInitialGuideResponse['\"]]\s*=\s*/,/ytInitialGuideResponse\s*=\s*/]),o=i.next();!o.done;o=i.next()){var a=o.value;try{return v.parseForObject(r,a,!0)}catch(e){continue}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new Error("ytInitialGuideResponse: could not find match for ytInitialGuideResponse")},t.isAgeRestricted=function(e){try{f.regexSearch(/og:restrictions:age/,e,0)}catch(e){return!1}return!0},t.videoInfoUrlAgeRestricted=function(e){return y({video_id:e,eurl:"https://youtube.googleapis.com/v/".concat(e),c:"TVHTML5",cver:"7.20190319",html5:1})},t.extract_ytcfg=m,t.extract_context=function(e){var t=m(e);if(t)return t.INNERTUBE_CONTEXT},t.extract_dataSyncId=function(e){var t=m(e);if(t)return t.DATASYNC_ID},t.extract_client=function(e){var t=m(e);if(t)return[t.INNERTUBE_CONTEXT_CLIENT_NAME,t.INNERTUBE_CLIENT_VERSION]},t.extract_auth=function(e,t){return s(this,void 0,void 0,(function(){function n(e,t){var n=t.match('"'.concat(e,'"\\s*:\\s*"([^"]*)"'));if(n)return n[1]}var r,i,o,a,s,l,d,h,f,v,_,y,b,g,w,T;return u(this,(function(u){switch(u.label){case 0:return(r=m(e))?(i=JSON.stringify(r),o=n("DELEGATED_SESSION_ID",i),a=n("USER_SESSION_ID",i),s=r.LOGGED_IN,o&&a||(l=n("DATASYNC_ID",i))&&(d=c(l.split("||"),2),h=d[0],f=d[1],o||f&&(o=h),a||(a=f||h)),v=n("SESSION_INDEX",i),[4,new Promise((function(e){App.getCookiesThen(t,(function(t){e(t?JSON.parse(t):t)}))}))]):[3,2];case 1:return _=u.sent(),y=[],_&&Array.isArray(_)&&(b="",g="",w="",_.forEach((function(e){"__Secure-3PAPISID"===e.name&&(g=e.value),"SAPISID"===e.name&&(b=e.value),"__Secure-1PAPISID"===e.name&&(w=e.value)})),T={SAPISIDHASH:b=b||g,SAPISID1PHASH:w,SAPISID3PHASH:g},Object.keys(T).forEach((function(e){if(T[e]){var n=Date.now(),r=p.sha1.create(),i=(a?"".concat(a," "):"")+"".concat(n," ").concat(T[e]," ").concat(t);r.update(i);var o=r.hex();y.push("".concat(e," ").concat(n,"_").concat(o)+(a?"_u":""))}}))),[2,{"X-Goog-PageId":o||void 0,"X-Goog-AuthUser":v||0,Authorization:y.length>0?y.join(" "):void 0,"X-Origin":y.length>0?t:void 0,"X-Youtube-Bootstrap-Logged-In":s?"true":void 0}];case 2:return[2]}}))}))},t.jsURL=function(e){var t="",n=m(e);if(n){var r=n;if(null==r?void 0:r.PLAYER_JS_URL)t=r.PLAYER_JS_URL;else if(null==r?void 0:r.WEB_PLAYER_CONTEXT_CONFIGS){var i=r.WEB_PLAYER_CONTEXT_CONFIGS;i&&Object.values(i).every((function(e){return!e.jsUrl||(t=e.jsUrl,!1)}))}}if(0!==t.length)return"https://www.youtube.com"+t},t.videoInfoURL=function(e,t){return y({video_id:e,ps:"default",eurl:t,hl:"en_US"})},t.initialData=function(e){var t,n;try{for(var r=l([/window\[['\"]ytInitialData['\"]]\s*=\s*/,/ytInitialData\s*=\s*/]),i=r.next();!i.done;i=r.next()){var o=i.value;try{return v.parseForObject(e,o)}catch(e){continue}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("initial_data: could not find match for initial_data_pattern")},t.getYtplayerConfig=function(e){var t,n,r,i;try{for(var o=l([/ytplayer\.config\s*=\s*/,/ytInitialPlayerResponse\s*=\s*/]),a=o.next();!a.done;a=o.next()){var s=a.value;try{return v.parseForObject(e,s)}catch(e){continue}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}try{for(var u=l([/yt\.setConfig\(.*['\"]PLAYER_CONFIG['\"]:\s*/]),c=u.next();!c.done;c=u.next()){s=c.value;try{return v.parseForObject(e,s)}catch(e){continue}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}throw new Error("get_ytplayer_config: could not find match for config_patterns, setconfig_patterns")},t.getYtplayerJS=function(e){var t,n;try{for(var r=l([/(\/s\/player\/[\w\d]+\/[\w\d_/.]+\/base\.js)/]),i=r.next();!i.done;i=r.next()){var o=i.value,a=e.match(o);if(a)return a[1]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new Error("get_ytplayer_js: could not find match for js_url_patterns")},t.applyDescrambler=function(e,t){var n,i,o,a=!1;if("url_encoded_fmt_stream_map"!==t||(null==e?void 0:e.url_encoded_fmt_stream_map))e[t]=e[t].split(",").map((function(e){return f.parseQSL(e)}));else{var s=[];if(!(o="string"==typeof e.player_response?null===(n=JSON.parse(decodeURIComponent(e.player_response)))||void 0===n?void 0:n.streamingData:null===(i=null==e?void 0:e.player_response)||void 0===i?void 0:i.streamingData))throw new Error("could not find streamingData");"formats"in o&&(s=s.concat(o.formats)),"adaptiveFormats"in o&&(s=s.concat(o.adaptiveFormats));try{e[t]=s.map((function(e){if("targetDurationSec"in e||"drmFamilies"in e)return a=!0,!1;if(!e.url)throw new Error("key error");return r({url:e.url},f.parseStreamDataFormat(e))})).filter((function(e){return e})),a&&(e[t]=[{url:o.hlsManifestUrl}])}catch(n){var u=s.map((function(e){var t="cipher"in e?"cipher":"signatureCipher";return f.parseQSL(e[t])}));e[t]=s.map((function(e,t){return r({url:u[t].url,s:u[t].s},f.parseStreamDataFormat(e))}))}}return a},t.applySignature=function(e,t,n){var r=new h.default(n),i=e[t];i.forEach((function(t,n){var o,a,s=t.url;if(!s&&(null===(a=(null===(o=e.player_response)||void 0===o?void 0:o.playabilityStatus)||{})||void 0===a?void 0:a.liveStreamability))throw new Error("is streaming live and cannot be loaded");if(s.indexOf("signature")>0||!t.s&&(s.indexOf("&sig=")>0||s.indexOf("&lsig=")>0));else{var u=r.getSignature(decodeURIComponent(t.s)),l=decodeURIComponent(s)+"&sig="+u;i[n].url=l}}))};var b=["compactVideoRenderer","gridVideoRenderer"];function g(e){return e.reduce((function(e,t){var n,r=Object.keys(t);if(b.includes(r[0])){var i=t[r[0]];e.push({type:r[0]||"",videoId:null==i?void 0:i.videoId,title:f.getText(null==i?void 0:i.title),thumbnails:null===(n=null==i?void 0:i.thumbnail)||void 0===n?void 0:n.thumbnails,author:f.getText(null==i?void 0:i.shortBylineText),publishedTime:f.getText(null==i?void 0:i.publishedTimeText),viewCountText:f.getText(null==i?void 0:i.viewCountText),shortViewCountText:f.getText(null==i?void 0:i.shortViewCountText),lengthText:f.getText(null==i?void 0:i.lengthText)})}return e}),[])}t.parseRecommend=function(e){var t,n,r,i,o,a,s,u,l,c,d=(null===(u=null===(s=null===(a=null===(o=null===(i=null===(r=null===(n=null===(t=null==e?void 0:e.contents)||void 0===t?void 0:t.singleColumnWatchNextResults)||void 0===n?void 0:n.results)||void 0===r?void 0:r.results)||void 0===i?void 0:i.contents[1])||void 0===o?void 0:o.shelfRenderer)||void 0===a?void 0:a.content)||void 0===s?void 0:s.horizontalListRenderer)||void 0===u?void 0:u.items)||[],h=g(d);return 0===h.length&&(h=g(d=(null===(c=null===(l=d.find((function(e){return"itemSectionRenderer"in e})))||void 0===l?void 0:l.itemSectionRenderer)||void 0===c?void 0:c.contents)||[])),h.length,h}},220:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=h(n(690)),v=a(n(293)),p=n(108),_=h(n(680)),y=h(n(297)),m=n(297),b=n(148),g=h(n(671)),w=a(n(205)),T=function(){function e(e){var t=this;this.videoId="",this.watchHTML="",this.url="",this.ageRestricted=!1,this.embedHTML="",this.vidInfoURL="",this.jsURL="",this.js="",this.vidInfoRaw="",this.simpleMode=!1,this.initialData={},this.vidInfo={},this.playerConfigArgs={},this.playerResponse={};var n=e.url,r=e.onCompleteCallback,i=e.onError,o=e.parseDetailInfo,a=e.simpleMode;this.simpleMode=!!a,this.parseDetailInfo=o,this.onCompleteCallback=function(n,i,o){return s(t,void 0,void 0,(function(){var t,a,s,d,h,f,v,_,b;return u(this,(function(u){switch(u.label){case 0:return[4,y.default.isVideoForbidden(e,n,o)];case 1:return u.sent()?(App.fetchPotTokenThen(!0,(function(){})),t=(null===(_=null==n?void 0:n.formats)||void 0===_?void 0:_.filter((function(e){return!m.audioItag.includes(e.itag)})))||[],a=c([],l(t),!1),s=n,d=(0,p.parseQSL)(null===(b=t.find((function(e){return m.audioItag.includes(e.itag)})))||void 0===b?void 0:b.url),[4,this.queryVideoWithWebClient(!d.pot)]):[3,3];case 2:return h=u.sent(),f=h.success,h.msg,v=h.data,f&&v&&(((null==v?void 0:v.formats)||[]).forEach((function(e){-1===t.findIndex((function(t){return e.itag===t.itag}))&&a.push(e)})),v.thumbnails&&(s.thumbnails=v.thumbnails)),s.formats=a,r(s,i),[2];case 3:return r(n,i),[2]}}))}))},this.onError=function(e){var o=Number(e.name);e&&e.name&&o===b.Err_Code_N_Function_Failed||o===b.Err_Code_Signature_Failed?y.default.queryVideoWithClient(n,"android_vr").then((function(e){var n=e.success,o=e.data,a=e.msg;n&&o?r(o,t.videoId):i(new Error(a))})).catch((function(e){i(e)})):i(e)},this.reportNetworkError=e.onNetworkError;try{this.videoId=(0,p.getVideoId)(n)}catch(e){return void this.onError(new Error("__notRetry@".concat(e.message)))}this.url=n,this.start()}return e.prototype.onNetworkError=function(e,t){this.reportNetworkError(new Error(e))},e.prototype.checkAvailability=function(){var e,t;if(!this.watchHTML)throw new Error("fetch the failure");var n=v.playabilityStatus(this.watchHTML),r=n.status,i=n.playerResponse,o=n.info;try{for(var a=d(o),s=a.next();!s.done;s=a.next()){var u=s.value;if("ERROR"===r)throw new Error("__notRetry@is unavailable");if("LOGIN_REQUIRED"===r){if(null==u?void 0:u.includes("This is a private video."))throw new Error("login required")}else if("UNPLAYABLE"===r)throw new Error("__notRetry@unplayable")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return i},e.prototype.queryVideoWithWebClient=function(e){return void 0===e&&(e=!0),s(this,void 0,void 0,(function(){var t,n;return u(this,(function(r){switch(r.label){case 0:return[4,w.isSupportPotoken()];case 1:return t=r.sent(),n=/music.youtube.com/.test(this.url),t&&e?[4,y.default.queryVideoWithClient(this.url,n?"web_music":"web")]:[3,3];case 2:case 4:return[2,r.sent()];case 3:return[4,y.default.queryVideoWithClient(this.url,"android_vr",!1)]}}))}))},e.prototype.start=function(){var e,t,n,i,o,a,c,h,y,m;return s(this,void 0,void 0,(function(){var s,w,T,E,S,x,A,R,I,C,O,P,N,M,L,k,D,U,j,H,B,F,V,G,W,Y,q,z,X,Z,$,J,K,Q,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,de,he,fe,ve,pe,_e,ye,me,be,ge,we,Te,Ee,Se,xe,Ae,Re,Ie,Ce,Oe,Pe,Ne,Me,Le,ke,De,Ue,je,He,Be,Fe,Ve,Ge,We,Ye,qe,ze,Xe,Ze,$e,Je,Ke,Qe,et,tt,nt;return u(this,(function(u){switch(u.label){case 0:if(u.trys.push([0,8,,9]),!this.videoId)throw new Error("can't parse id");return[4,g.default.getWatchHTML(this.videoId)];case 1:if(s=u.sent(),w=s.success,T=s.errorMsg,E=s.data,!w||!E)return this.onNetworkError(T,"watchURL"),[2];this.watchHTML=E,this.watchHTML&&(this.playerResponse=v.initialPlayerResponse(this.watchHTML)),S=this.playerResponse.playabilityStatus||{},x={status:null,info:[]},"status"in S&&("reason"in S&&(x={status:S.status,info:[S.reason]}),"message"in S&&(x={status:S.status,info:S.message}));try{for(A=d(x.info),R=A.next();!R.done;R=A.next()){if(R.value,"ERROR"===x.status)throw new Error("is unavailable");if("LOGIN_REQUIRED"===x.status)throw new Error("login required");if("UNPLAYABLE"===x.status)throw new Error("unplayable")}}catch(e){ze={error:e}}finally{try{R&&!R.done&&(Xe=A.return)&&Xe.call(A)}finally{if(ze)throw ze.error}}return v.isAgeRestricted(this.watchHTML)?(I=void 0,[4,(0,_.default)(v.videoInfoUrlAgeRestricted(this.videoId),{method:"GET"})]):[3,3];case 2:if(!(C=u.sent()).success)return this.onNetworkError(C.errorMsg,"age restricted request"),[2];(I=JSON.parse(decodeURIComponent((0,p.parseQSL)(C.data).player_response)))&&(this.playerResponse=I),u.label=3;case 3:return[4,new Promise((function(e){App.fetchPotTokenThen(!1,(function(t){return e(t)}))}))];case 4:return O=u.sent(),P=this.playerResponse.videoDetails||{},N=(null===(t=null===(e=this.playerResponse)||void 0===e?void 0:e.microformat)||void 0===t?void 0:t.playerMicroformatRenderer)||{},M=(null===(n=this.playerResponse)||void 0===n?void 0:n.title)||(0,p.getText)(null==N?void 0:N.title)||(0,p.htmlSearchMeta)(["og:title","twitter:title","title"],this.watchHTML),L=null==P?void 0:P.shortDescription,k=[],D=[],U={},j=void 0,H=this.playerResponse.streamingData||{},B=(B=H.formats||[]).concat(H.adaptiveFormats||[]),F=P.isLive,[4,g.default.getPlayerJSCode(this.watchHTML)];case 5:if(V=l.apply(void 0,[u.sent(),2]),G=V[0],W=V[1],!G)return this.onNetworkError("js player code error","jsURL"),[2];try{for(Y=d(B),q=Y.next();!q.done;q=Y.next())if(!(null==(z=q.value)?void 0:z.targetDurationSec)&&(Te=(null==z?void 0:z.itag)||"",X=z.quality,Te&&X&&(U[Te]=X),Z=null==z?void 0:z.drmFamilies,"FORMAT_STREAM_TYPE_OTF"!==z.type||Z)){if(!($=z.url)){if(j||G&&(j=new f.default(G,W)),J=(0,p.parseQSL)(z.signatureCipher),$=J.url,K=J.s,!$||!K)continue;try{if(!(Q=j.getSignature(decodeURIComponent(K))))throw new Error("signature failed");ee=J.sp||"signature",$="".concat(decodeURIComponent($),"&").concat(ee,"=").concat(Q)}catch(e){throw(re=new Error(e.message)).name=String(b.Err_Code_Signature_Failed),re}}if((te=(0,p.parseQSL)($)).n){if(j||G&&(j=new f.default(G,W)),!(ne=j.decode_n_params(te.n)))throw(re=new Error("decode n params error")).name=String(b.Err_Code_N_Function_Failed),re;$=(0,p.replaceQueryParam)($,"n",ne)}if(O&&($="".concat($,"&pot=").concat(O)),Te&&D.push(Te),be=z.averageBitrate||z.bitrate,Ce={filesize:null==z?void 0:z.contentLength,width:null==z?void 0:z.width,height:null==z?void 0:z.height,type:z.mimeType,quality:z.quality,itag:z.itag,fps:null==z?void 0:z.fps,bitrate:(null==z?void 0:z.averageBitrate)||(null==z?void 0:z.bitrate),url:$},ie=z.mimeType)try{oe=ie.match(/((?:[^\/]+)\/(?:[^;]+))(?:;\s*codecs="([^"]+)")?/),ae=(0,p.mimetype2ext)(oe[1]),se=(0,p.parseCodecs)(oe[2]),Ce.ext=ae,Ce=r(r({},Ce),se)}catch(e){}ue=!!(null==Ce?void 0:Ce.acodec),le=!!(null==Ce?void 0:Ce.vcodec),ue&&(Ce.vbr=be),le&&(Ce.abr=be),(le||ue)&&Ce.ext&&(Ce.container=Ce.ext+"_dash"),k.push(Ce)}}catch(e){Ze={error:e}}finally{try{q&&!q.done&&($e=Y.return)&&$e.call(Y)}finally{if(Ze)throw Ze.error}}return(ce=H.hlsManifestUrl)?(O&&(ce.endsWith("/")&&(ce=ce.slice(0,-1)),ce+="/pot/".concat(O)),[4,(0,_.default)(ce)]):[3,7];case 6:if(de=u.sent(),he=de.success,fe=de.data,he&&"string"==typeof fe&&-1===fe.indexOf("#EXT-X-TARGETDURATION")){ve=fe.split("\n"),pe={};try{for(_e=d(ve),ye=_e.next();!ye.done;ye=_e.next())if((me=ye.value).startsWith("#EXT-X-STREAM-INF:"))pe=null===(i=me.match(/([A-Z0-9-]+)=("[^"]+"|[^",]+)(?:,|$)/g))||void 0===i?void 0:i.reduce((function(e,t){var n=l(t.match(/([A-Z0-9-]+)=("[^"]+"|[^",]+)(?:,|$)/).splice(1),2),r=n[0],i=n[1];return e[r]=i,e}),{});else{if(me.startsWith("#")||!me.trim())continue;be=pe["AVERAGE-BANDWIDTH"]||pe.BANDWIDTH,(ge=me.trim())&&(we=l(null===(o=ge.match(/itag\/(\d+)/))||void 0===o?void 0:o.splice(1),1),Te=we[0],Ee=l(null===(c=null===(a=pe.RESOLUTION)||void 0===a?void 0:a.match(/(\d+)[xX](\d+)/))||void 0===c?void 0:c.splice(1),2),Se=Ee[0],xe=Ee[1],Ae=l(null===(h=pe.CODECS)||void 0===h?void 0:h.split(","),2),Re=Ae[0],Ie=Ae[1],Ce={width:Se,height:xe,ext:"mp4",vcodec:Re,acodec:Ie,itag:Number(Te),url:ge,tbr:be,fps:parseFloat(pe["FRAME-RATE"]||0)},k.push(Ce))}}catch(e){Je={error:e}}finally{try{ye&&!ye.done&&(Ke=_e.return)&&Ke.call(_e)}finally{if(Je)throw Je.error}}}u.label=7;case 7:if(0===k.length){if(H.licenseInfos)throw new Error("This video is DRM protected");if(Oe=(null===(y=null==S?void 0:S.errorScreen)||void 0===y?void 0:y.playerErrorMessageRenderer)||{},Pe=(0,p.getText)(null==Oe?void 0:Oe.reason)||(null==S?void 0:S.reason),(Ne=(0,p.getText)(Oe.subreason))&&(Pe+=","+Ne),Pe)throw new Error(Pe)}Me=P.keywords||[],Le=[];try{for(ke=d([P,N]),De=ke.next();!De.done;De=ke.next()){Ue=De.value;try{for(tt=void 0,je=d((null===(m=null==Ue?void 0:Ue.thumbnail)||void 0===m?void 0:m.thumbnails)||[]),He=je.next();!He.done;He=je.next())Fe=He.value,(Be=null==Fe?void 0:Fe.url)&&Le.push({height:null==Fe?void 0:Fe.height,url:Be,width:null==Fe?void 0:Fe.width})}catch(e){tt={error:e}}finally{try{He&&!He.done&&(nt=je.return)&&nt.call(je)}finally{if(tt)throw tt.error}}if(Le.length>0)break}}catch(e){Qe={error:e}}finally{try{De&&!De.done&&(et=ke.return)&&et.call(ke)}finally{if(Qe)throw Qe.error}}0===Le.length&&(Fe=(0,p.htmlSearchMeta)(["og:image","twitter:image"],this.watchHTML))&&Le.push({url:Fe}),Ve=(null==N?void 0:N.category)||(0,p.htmlSearchMeta)(["genre"],this.watchHTML),Ge=(null==P?void 0:P.channelId)||(null==N?void 0:N.externalChannelId)||(0,p.htmlSearchMeta)("channelId",this.watchHTML),We=(null==P?void 0:P.lengthSeconds)||(null==N?void 0:N.lengthSeconds)||(0,p.htmlSearchMeta)("duration",this.watchHTML);try{this.initialData=v.initialData(this.watchHTML)}catch(e){}return Ye={url:this.url,isLive:Boolean(F),id:this.videoId,title:M,formats:k,thumbnails:Le,description:L,category:Ve||[],duration:We,viewCount:P.viewCount||N.viewCount||(0,p.htmlSearchMeta)(["interactionCount"],this.watchHTML),keywords:Me,averageRating:P.averageRating,author:P.author,channelID:Ge,recommendInfo:this.initialData?v.parseRecommend(this.initialData):[]},Ge&&(Ye.channelURL="https://www.youtube.com/channel/"+Ge),this.onCompleteCallback(Ye,this.videoId),[3,9];case 8:return qe=u.sent(),this.onError(qe),[3,9];case 9:return[2]}}))}))},e}();t.default=T},671:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=c(n(680)),h=a(n(293)),f=function(){function e(){this.iframe_api_jsplayer="",this.jsPlayerResMap={},this.watchHTMLMap={},this.timeout=18e5,this.n_FuncMap={},this.isCheckingPlayerExpired=!1,this.musicHTML="",this.lastFetchMusicTime=0}return e.prototype.getWatchHTML=function(e,t){return s(this,void 0,void 0,(function(){var n,i,o,a,s,l,c,h,f,v=this;return u(this,(function(u){switch(u.label){case 0:return e?!(n=!!t)&&(i=Date.now(),Object.keys(this.watchHTMLMap).forEach((function(e){var t=v.watchHTMLMap[e]||{},n=t.data,r=t.time;n&&i-r>v.timeout&&delete v.watchHTMLMap[e]})),null==(o=this.watchHTMLMap[e])?void 0:o.data)?[2,{success:!0,data:o.data,code:200}]:(a="https://www.youtube.com/watch?v=".concat(e,"&bpctr=9999999999&has_verified=1"),[4,(0,d.default)(a,r({method:"GET"},t?{headers:{"User-Agent":t}}:{}))]):[2,{success:!1,errorMsg:"videoId not found"}];case 1:return s=u.sent(),l=s.success,c=s.data,h=s.errorMsg,f=s.code,l&&c&&(n||(this.watchHTMLMap[e]={data:c,time:Date.now()})),[2,{success:l,data:c,errorMsg:h,code:f}]}}))}))},e.prototype.getMusicWatchHTML=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return e=Date.now(),this.musicHTML&&e-this.lastFetchMusicTime<this.timeout?[2,{success:!0,data:this.musicHTML}]:[4,(0,d.default)("https://music.youtube.com",{method:"GET"})];case 1:return t=a.sent(),n=t.success,r=t.data,i=t.errorMsg,o=t.code,n&&r&&(this.musicHTML=r,this.lastFetchMusicTime=e),[2,{success:n,data:r,errorMsg:i,code:o}]}}))}))},e.prototype.getPlayerJSCode=function(e){var t,n,r,i;return s(this,void 0,void 0,(function(){var o,a,s,c,f,v,p,_,y,m,b,g,w,T,E;return u(this,(function(u){switch(u.label){case 0:return e?(o=h.jsURL(e))?[3,3]:this.iframe_api_jsplayer?(o=this.iframe_api_jsplayer,[3,3]):[3,1]:[2,[]];case 1:return[4,(0,d.default)("https://www.youtube.com/iframe_api")];case 2:(a=u.sent()).success&&a.data&&((s=l(a.data.match("player\\\\?/([0-9a-fA-F]{8})\\\\?/")||[],2))[0],(c=s[1])&&(o="https://www.youtube.com/s/player/".concat(c,"/player_ias.vflset/en_US/base.js"),this.iframe_api_jsplayer=o)),u.label=3;case 3:return o?(f=null===(t=this.jsPlayerResMap[o])||void 0===t?void 0:t.code,v=Date.now(),f?[3,5]:[4,(0,d.default)(o,{method:"GET"})]):[2,[]];case 4:return(p=u.sent()).success&&p.data&&(f=p.data,T=null===(n=p.responseHeaders)||void 0===n?void 0:n.Date,E=T&&new Date(T).getTime(),this.jsPlayerResMap[o]={code:f,time:E,lastCheckTime:v}),[3,7];case 5:return _=null===(r=this.jsPlayerResMap[o])||void 0===r?void 0:r.lastCheckTime,y=!_||v-_>this.timeout,this.isCheckingPlayerExpired||!y?[3,7]:(this.isCheckingPlayerExpired=!0,[4,(0,d.default)(o,{method:"HEAD"})]);case 6:m=u.sent(),b=m.success,g=m.responseHeaders,this.isCheckingPlayerExpired=!1,b&&g&&(w=null===(i=this.jsPlayerResMap[o])||void 0===i?void 0:i.time,T=null==g?void 0:g.Date,E=T&&new Date(T).getTime(),w&&E&&E!==w?(delete this.jsPlayerResMap[o],delete this.n_FuncMap[o],this.watchHTMLMap={}):this.jsPlayerResMap[o].lastCheckTime=v),u.label=7;case 7:return[2,[f,o]]}}))}))},e.prototype.get_n_function=function(e){if(e){var t=this.n_FuncMap[e];if(t)return t}},e.prototype.save_n_function=function(e,t){e&&(this.n_FuncMap[e]=t)},e.prototype.clear=function(){this.isCheckingPlayerExpired=!1,this.n_FuncMap={},this.watchHTMLMap={},this.jsPlayerResMap={},this.iframe_api_jsplayer=""},e}();t.default=new f},752:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.core=t.Music=t.MusicPagePosition=void 0;var f,v=n(108),p=h(n(680)),_=a(n(325)),y=a(n(413));!function(e){e.HOME_PAGE="homepage",e.NEW_RELEASE="new_release",e.NEW_ALBUMS="new_albums",e.NEW_VIDEOS="new_videos",e.CHARTS="charts",e.MOODS_AND_GENRES="moods_and_genres",e.SPECIAL_PARSE_PLAYLIST="special_parse_playlist",e.SPECIAL_PARSE_CHANNEL_PLAYLIST="special_parse_channel_playlist"}(f=t.MusicPagePosition||(t.MusicPagePosition={}));var m="https://music.youtube.com",b={homepage:m+"/",new_release:m+"/new_releases",new_albums:m+"/new_releases/albums",new_videos:m+"/new_releases/videos",charts:m+"/charts",moods_and_genres:m+"/moods_and_genres",special_parse_playlist:"",special_parse_channel_playlist:""},g=function(){function e(){this.url="",this.initialData=[],this.commonUserAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.14 Safari/537.36"}return e.prototype.get=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return this.position=e,this.url=t||b[e],[4,this.fetchPage()];case 1:return i.sent(),e!==f.CHARTS?[3,3]:[4,this.getCharts()];case 2:return n=i.sent(),[3,10];case 3:return e!==f.MOODS_AND_GENRES?[3,5]:(r=this.getBasicInfo(),[4,this.getMoodsGenres(r)]);case 4:return n=i.sent(),[3,10];case 5:return e!==f.SPECIAL_PARSE_PLAYLIST?[3,7]:[4,this.getPlaylist()];case 6:return n=i.sent(),[3,10];case 7:return e!==f.SPECIAL_PARSE_CHANNEL_PLAYLIST?[3,9]:[4,this.getChannelPlaylist()];case 8:return n=i.sent(),[3,10];case 9:n=this.getBasicInfo(),this.position===f.HOME_PAGE&&(n=c([],l(n),!1).sort((function(e){var t;return(null===(t=e.content[0])||void 0===t?void 0:t.isMusician)?1:-1}))),i.label=10;case 10:return[2,n]}}))}))},e.prototype.getPositions=function(e){return s(this,void 0,void 0,(function(){var t,n,i,o,a,s,h,v,y,m,g,w,T;return u(this,(function(u){switch(u.label){case 0:return this.position=f.HOME_PAGE,this.url=b[f.HOME_PAGE],[4,this.fetchPage()];case 1:u.sent(),t=this.buildRequest(),n=t.body,i=t.url,o=n,a=[{type:f.HOME_PAGE,data:c([],l(this.getBasicInfo()),!1).sort((function(e){var t;return(null===(t=e.content[0])||void 0===t?void 0:t.isMusician)?1:-1}))}],u.label=2;case 2:u.trys.push([2,7,8,9]),s=d(e),h=s.next(),u.label=3;case 3:return h.done?[3,6]:((v=h.value)===f.NEW_RELEASE?o=r(r({},n),{browseId:"FEmusic_new_releases"}):v===f.NEW_ALBUMS?o=r(r({},n),{browseId:"FEmusic_new_releases_albums"}):v===f.NEW_VIDEOS&&(o=r(r({},n),{browseId:"FEmusic_new_releases_videos"})),[4,(0,p.default)(i,{method:"POST",headers:this.getHeader(v,"https://music.youtube.com"),body:o})]);case 4:y=u.sent(),m=[];try{m=y.data.contents.singleColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents.map((function(e){return _.parseSectionData(e)})).filter((function(e){return e}))}catch(e){}a.push({type:v,data:m}),u.label=5;case 5:return h=s.next(),[3,3];case 6:return[3,9];case 7:return g=u.sent(),w={error:g},[3,9];case 8:try{h&&!h.done&&(T=s.return)&&T.call(s)}finally{if(w)throw w.error}return[7];case 9:return[2,a]}}))}))},e.prototype.buildRequest=function(){var e=this.buildSkeletonRequest(),t=JSON.parse(this.H("INITIAL_ENDPOINT")),n="https://music.youtube.com/youtubei/v1/browse?alt=json&key=".concat(this.H("INNERTUBE_API_KEY"));return{body:r({context:{client:r(r({},e.context.client),{utcOffsetMinutes:String(-(new Date).getTimezoneOffset()),locationInfo:{locationPermissionAuthorizationStatus:"LOCATION_PERMISSION_AUTHORIZATION_STATUS_UNSUPPORTED"},musicAppInfo:{musicActivityMasterSwitch:"MUSIC_ACTIVITY_MASTER_SWITCH_INDETERMINATE",musicLocationMasterSwitch:"MUSIC_LOCATION_MASTER_SWITCH_INDETERMINATE",pwaInstallabilityStatus:"PWA_INSTALLABILITY_STATUS_CAN_BE_INSTALLED"}}),capabilities:{},request:{internalExperimentFlags:[]},activePlayers:{},user:{enableSafetyMode:!1}}},t.browseEndpoint),url:n}},e.prototype.getChartsWithCountry=function(e){return s(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.position=f.CHARTS,this.url=b[f.CHARTS],[4,this.fetchPage()];case 1:return t.sent(),[4,this.getCharts(e)];case 2:return[2,t.sent()]}}))}))},e.prototype.fetchPage=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return[4,(0,p.default)(this.url,{method:"GET",headers:{"User-Agent":this.commonUserAgent}})];case 1:if(!(e=a.sent()).success)throw new Error("".concat(this.position," request failure"));if(t=e.data,n=this.position===f.SPECIAL_PARSE_PLAYLIST||this.position===f.CHARTS,r=_.parseYtcfg(t,{isPlaylist:n}),i=r.ytcfg,0===(o=r.initialData).length&&!n)throw new Error("could find initialData");return this.ytcfg=i,this.initialData=o,[2]}}))}))},e.prototype.getChannelPlaylist=function(){var e;try{e=this.initialData.find((function(e){return"/browse"===e.path})).data.frameworkUpdates.entityBatchUpdate.mutations||[]}catch(e){throw new Error("getChannelPlaylist: could find sectionList")}if(0===e.length)throw new Error("getChannelPlaylist: could find sectionList");return e.reduce((function(e,t){var n=t.payload;if("musicTrack"in n){var r=n.musicTrack,i=r.title,o=r.thumbnailDetails,a=r.artistNames,s=r.videoId,u=r.lengthMs;e.contents=e.contents.concat({videoId:s,thumbnails:null==o?void 0:o.thumbnails,title:i,author:a,lengthText:"".concat(Math.floor(u/60/1e3),":").concat(u%60),url:"https://music.youtube.com/watch?v="+s})}else if("musicAlbumRelease"in n){var l=n.musicAlbumRelease,c=(i=l.title,o=l.thumbnailDetails,l.audioPlaylistId);e.title=i,e.thumbnail=null==o?void 0:o.thumbnails,e.id=c}return e}),{id:"",title:"",description:"",thumbnail:[],contents:[]})},e.prototype.getBasicInfo=function(){var e;try{e=this.initialData.find((function(e){return"/browse"===e.path})).data.contents.singleColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents||[]}catch(e){throw new Error("could find sectionList")}if(0===e.length)throw new Error("could find sectionList");return e.map((function(e){return _.parseSectionData(e)})).filter((function(e){return e}))},e.prototype.getCharts=function(e){return s(this,void 0,void 0,(function(){var t,n,i,o,a,s,l=this;return u(this,(function(u){switch(u.label){case 0:return t=[{name:"Global",code:"ZZ"}],e&&(t=[{name:e,code:e||"US"}]),n=this.buildSkeletonRequest(),i="https://music.youtube.com/youtubei/v1/browse?alt=json&key=".concat(this.H("INNERTUBE_API_KEY")),o=JSON.parse(this.H("INITIAL_ENDPOINT")),a=[],s=function(e){return r(r({context:{client:r(r({},n.context.client),{utcOffsetMinutes:String(-(new Date).getTimezoneOffset()),locationInfo:{locationPermissionAuthorizationStatus:"LOCATION_PERMISSION_AUTHORIZATION_STATUS_UNSUPPORTED"},musicAppInfo:{musicActivityMasterSwitch:"MUSIC_ACTIVITY_MASTER_SWITCH_INDETERMINATE",musicLocationMasterSwitch:"MUSIC_LOCATION_MASTER_SWITCH_INDETERMINATE",pwaInstallabilityStatus:"PWA_INSTALLABILITY_STATUS_CAN_BE_INSTALLED"}}),capabilities:{},request:{internalExperimentFlags:[]},activePlayers:{},user:{enableSafetyMode:!1}}},o.browseEndpoint),{formData:{selectedValues:[e]}})},e?[4,y.asyncPool(1,t,(function(e){var t=e.code,n=e.name;return(0,p.default)(i,{method:"POST",headers:l.getHeader(f.CHARTS),body:s(t)}).then((function(e){return r(r({},e),{name:n})}))}))]:[3,2];case 1:return a=u.sent(),[3,4];case 2:return[4,y.asyncPool(5,t,(function(e){var t=e.code,n=e.name;return(0,p.default)(i,{method:"POST",headers:l.getHeader(f.CHARTS),body:s(t)}).then((function(e){return r(r({},e),{name:n})}))}))];case 3:a=u.sent(),u.label=4;case 4:return[2,a.reduce((function(e,t){var n=t.name,r=t.data;return e[n]=r.contents.singleColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents.map((function(e){return _.parseSectionData(e)})).filter((function(e){return e})),e}),{})]}}))}))},e.prototype.getMoodsGenres=function(e){return s(this,void 0,void 0,(function(){var t,n,i,o,a,s,l,c,h,v,m=this;return u(this,(function(u){switch(u.label){case 0:t=this.buildSkeletonRequest(),n="https://music.youtube.com/youtubei/v1/browse?alt=json&key=".concat(this.H("INNERTUBE_API_KEY")),i=[],u.label=1;case 1:u.trys.push([1,6,7,8]),o=d(e),a=o.next(),u.label=2;case 2:return a.done?[3,5]:(s=a.value,[4,y.asyncPool(2,s.content,(function(e){return(0,p.default)(n,{method:"POST",headers:m.getHeader(f.MOODS_AND_GENRES),body:r({context:{client:r(r({},t.context.client),{utcOffsetMinutes:String(-(new Date).getTimezoneOffset()),locationInfo:{locationPermissionAuthorizationStatus:"LOCATION_PERMISSION_AUTHORIZATION_STATUS_UNSUPPORTED"},musicAppInfo:{musicActivityMasterSwitch:"MUSIC_ACTIVITY_MASTER_SWITCH_INDETERMINATE",musicLocationMasterSwitch:"MUSIC_LOCATION_MASTER_SWITCH_INDETERMINATE",pwaInstallabilityStatus:"PWA_INSTALLABILITY_STATUS_CAN_BE_INSTALLED"}}),capabilities:{},request:{internalExperimentFlags:[]},activePlayers:{},user:{enableSafetyMode:!1}}},e.clickCommand.browseEndpoint)}).then((function(t){var n,r=t.data;try{n=r.contents.singleColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents.map((function(e){return _.parseSectionData(e)})).filter((function(e){return e}))}catch(e){}return{content:n,buttonText:e.buttonText,color:e.color}}))}))]);case 3:l=u.sent(),i.push(r(r({},s),{content:l})),u.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return c=u.sent(),h={error:c},[3,8];case 7:try{a&&!a.done&&(v=o.return)&&v.call(o)}finally{if(h)throw h.error}return[7];case 8:return[2,i]}}))}))},e.prototype.getPlaylist=function(){return s(this,void 0,void 0,(function(){var e,t,n;return u(this,(function(i){switch(i.label){case 0:return e=this.buildSkeletonRequest(),t="https://music.youtube.com/youtubei/v1/next?alt=json&key=".concat(this.H("INNERTUBE_API_KEY")),n=JSON.parse(this.H("INITIAL_ENDPOINT")),[4,(0,p.default)(t,{method:"POST",headers:this.getHeader(f.SPECIAL_PARSE_PLAYLIST),body:r({context:{client:r(r({},e.context.client),{utcOffsetMinutes:480,locationInfo:{locationPermissionAuthorizationStatus:"LOCATION_PERMISSION_AUTHORIZATION_STATUS_UNSUPPORTED"},musicAppInfo:{musicActivityMasterSwitch:"MUSIC_ACTIVITY_MASTER_SWITCH_INDETERMINATE",musicLocationMasterSwitch:"MUSIC_LOCATION_MASTER_SWITCH_INDETERMINATE",pwaInstallabilityStatus:"PWA_INSTALLABILITY_STATUS_UNKNOWN"}}),capabilities:{},request:{internalExperimentFlags:[]},activePlayers:{},user:{enableSafetyMode:!1}},enablePersistentPlaylistPanel:!0,tunerSettingValue:"AUTOMIX_SETTING_NORMAL",isAudioOnly:!0},n.watchEndpoint||n.watchPlaylistEndpoint)})];case 1:return[2,i.sent().data.contents.singleColumnMusicWatchNextResultsRenderer.tabbedRenderer.watchNextTabbedResultsRenderer.tabs[0].tabRenderer.content.musicQueueRenderer.content.playlistPanelRenderer.contents.map((function(e){var t,n=e.playlistPanelVideoRenderer;return!!n&&{id:n.videoId,thumbnails:null===(t=null==n?void 0:n.thumbnail)||void 0===t?void 0:t.thumbnails,title:(0,v.getText)(n.title),lengthText:(0,v.getText)(n.lengthText),author:(0,v.getText)(n.shortBylineText),url:"https://music.youtube.com/watch?v="+n.videoId}})).filter((function(e){return e}))]}}))}))},e.prototype.getHeader=function(e,t){var n;n=e===f.SPECIAL_PARSE_PLAYLIST?this.url:b[e],t&&(n=t);var r,i={"X-Goog-Visitor-Id":this.H("VISITOR_DATA"),"X-YouTube-Client-Name":this.H("INNERTUBE_CONTEXT_CLIENT_NAME"),"X-YouTube-Client-Version":this.H("INNERTUBE_CONTEXT_CLIENT_VERSION"),"X-YouTube-Device":this.H("DEVICE"),"X-YouTube-Page-CL":this.H("PAGE_CL"),"X-YouTube-Page-Label":this.H("PAGE_BUILD_LABEL"),"X-YouTube-Utc-Offset":String(-(new Date).getTimezoneOffset()),Referer:n,"User-Agent":this.commonUserAgent,"content-type":"application/json"};try{r=(new Intl.DateTimeFormat).resolvedOptions().timeZone}catch(e){}return r&&(i["X-YouTube-Time-Zone"]=r),i},e.prototype.H=function(e,t){void 0===t&&(t="");var n=this.ytcfg&&this.ytcfg.data_||{};return e in n?n[e]:t},e.prototype.buildSkeletonRequest=function(){var e={internalExperimentFlags:this.$k()};return e={context:{client:{clientName:this.H("INNERTUBE_CLIENT_NAME"),clientVersion:this.H("INNERTUBE_CLIENT_VERSION"),hl:this.H("HL","en"),gl:this.H("GL","US"),experimentIds:this.H("FORCED_EXPERIMENTS",[]),experimentsToken:this.H("EXPERIMENTS_TOKEN","")},capabilities:{},request:e}},this.H("OVERRIDE_GEO")&&w(this,e,{context:{client:{internalGeo:this.H("OVERRIDE_GEO")}}}),this.H("DELEGATED_SESSION_ID")&&w(this,e,{context:{user:{onBehalfOfUser:this.H("DELEGATED_SESSION_ID")}}}),this.H("DEVICE")&&w(this,e,{context:{client:E(this.H("DEVICE",void 0))}}),e},e.prototype.$k=function(){var e=[],t=this.H("EXPERIMENTS_FORCED_FLAGS",{});for(n in t)e.push({key:n,value:String(t[n])});var n=this.H("EXPERIMENT_FLAGS",{});for(var r in n)r.startsWith("force_")&&void 0===t[r]&&e.push({key:r,value:String(n[r])});return e},e.prototype.getOptionsMap=function(e){try{var t=e.frameworkUpdates.entityBatchUpdate.mutations.reduce((function(e,t){return t.payload.musicFormBooleanChoice&&(e[t.payload.musicFormBooleanChoice.id]=t.payload.musicFormBooleanChoice.opaqueToken),e}),{});return e.contents.singleColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents[0].musicShelfRenderer.subheaders[0].musicSideAlignedItemRenderer.startItems[0].musicSortFilterButtonRenderer.menu.musicMultiSelectMenuRenderer.options.reduce((function(e,n){return"musicMultiSelectMenuItemRenderer"in n?e.concat({name:n.musicMultiSelectMenuItemRenderer.title.runs[0].text,code:t[n.musicMultiSelectMenuItemRenderer.formItemEntityKey]}):e}),[])}catch(e){return[]}},e}();t.Music=g;var w=function(e,t,n){for(var r in n)T(t[r])?w(e,t[r],n[r]):t[r]||(t[r]=n[r])},T=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t};function E(e){var t={};e=R(Object.entries(function(e){return"?"==e.charAt(0)&&(e=e.substr(1)),function(e,t){for(var n={},r=0,i=(t=e.split(t)).length;r<i;r++){var o=t[r].split("=");if(1==o.length&&o[0]||2==o.length)try{var a=S(o[0]||""),s=S(o[1]||"");a in n?Array.isArray(n[a])?x(n[a],s):n[a]=[n[a],s]:n[a]=s}catch(e){}}return n}(e,"&")}(e)));for(var n=e.next();!n.done;n=e.next()){var r=R(n.value);n=r.next().value,r=r.next().value,"cbrand"===n?t.deviceMake=r:"cmodel"===n?t.deviceModel=r:"cbr"===n?t.browserName=r:"cbrver"===n?t.browserVersion=r:"cos"===n?t.osName=r:"cosver"===n?t.osVersion=r:"cplatform"===n&&(t.platform=r)}return t}function S(e){return e&&e.match(/^[\w.]*$/)?e:function(e){return decodeURIComponent(e.replace(/\+/g," "))}(e)}function x(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(A(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var a=0;a<o;a++)e[i+a]=r[a]}else e.push(r)}}function A(e){var t=function(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}(e);return"array"==t||"object"==t&&"number"==typeof e.length}function R(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:I(e)}}function I(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}t.core=new g},325:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseSectionData=exports.parseYtcfg=void 0;var utils_1=__webpack_require__(413),ytcfgRegGlobal=/ytcfg.set\(.*?\)[;<]/g,globalInitialDataRegex=/initialData\.push\s*/g;function parseYtcfg(content,options){var e_1,_a,e_2,_b,initialData=[],ytcfg={d:function(){return ytcfg.data_||(ytcfg.data_={})},get:function(e,t){return e in ytcfg.d()?ytcfg.d()[e]:t},set:function(){var e=arguments;if(e.length>1)ytcfg.d()[e[0]]=e[1];else for(var t in e[0])ytcfg.d()[t]=e[0][t]}},initialDataPushStringList=[];if(!(null==options?void 0:options.isPlaylist)&&!(null==options?void 0:options.isYouTube)){if(initialDataPushStringList=(0,utils_1.matchGlobal)(globalInitialDataRegex,content),!initialDataPushStringList||0===initialDataPushStringList.length)throw new Error("could not find initialDataPushStringList");initialDataPushStringList=initialDataPushStringList.map((function(e){return"initialData.push(".concat(e,")")}))}var ytcList=content.match(ytcfgRegGlobal);if(!ytcList)throw new Error("could not find ytcList");try{for(var _c=__values(__spreadArray(__spreadArray([],__read(initialDataPushStringList),!1),__read(ytcList),!1)),_d=_c.next();!_d.done;_d=_c.next()){var initialDataString=_d.value,statements=initialDataString;"<"===statements[statements.length-1]&&(statements=statements.substr(0,statements.length-1));try{eval(statements)}catch(e){}}}catch(e){e_1={error:e}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}try{for(var initialData_1=__values(initialData),initialData_1_1=initialData_1.next();!initialData_1_1.done;initialData_1_1=initialData_1.next()){var p=initialData_1_1.value;p.data=JSON.parse(p.data)}}catch(e){e_2={error:e}}finally{try{initialData_1_1&&!initialData_1_1.done&&(_b=initialData_1.return)&&_b.call(initialData_1)}finally{if(e_2)throw e_2.error}}return{ytcfg,initialData}}function parseSectionData(e){var t,n,r,i,o,a,s,u=Object.keys(e)[0];switch(u){case"musicImmersiveCarouselShelfRenderer":case"musicCarouselShelfRenderer":case"gridRenderer":case"shelfRenderer":a=(o=e[u]).header?o.header?getHeaderText(o.header):"":o.title?getText(o.title):"",s=getContent(o.contents||o.items||(null===(n=null===(t=null==o?void 0:o.content)||void 0===t?void 0:t.horizontalListRenderer)||void 0===n?void 0:n.items)||(null===(i=null===(r=null==o?void 0:o.content)||void 0===r?void 0:r.expandedShelfContentsRenderer)||void 0===i?void 0:i.items)||[]);break;default:return!1}return{title:a,content:s}}function getContent(e){return 0===e.length?[]:e.map((function(e){var t,n,r,i,o,a,s,u,l,c=Object.keys(e)[0],d=e[c];switch(c){case"playlistRenderer":case"gridPlaylistRenderer":return d;case"compactStationRenderer":var h=d.navigationEndpoint.watchEndpoint.videoId,f=d.navigationEndpoint.watchEndpoint.playlistId,v="https://www.youtube.com/watch?";return f&&(v+="list=".concat(f,"&")),h&&(v+="v=".concat(h)),{title:(null===(t=null==d?void 0:d.title)||void 0===t?void 0:t.simpleText)||"",subtitle:getText(d.videoCountText),thumbnail:(null===(n=null==d?void 0:d.thumbnail)||void 0===n?void 0:n.thumbnails)||[],url:v};case"musicNavigationButtonRenderer":return{buttonText:getText(d.buttonText),color:(0,utils_1.getColor)(d.solid.leftStripeColor),clickCommand:d.clickCommand};case"musicTwoRowItemRenderer":return{title:getText(d.title),subtitle:getText(d.subtitle),thumbnail:getThumbnail(d.thumbnailRenderer),url:"https://music.youtube.com"+parseNavigationEndpoint(d.navigationEndpoint)};case"musicResponsiveListItemRenderer":var p=void 0;switch(null===(o=null===(i=null===(r=null==d?void 0:d.customIndexColumn)||void 0===r?void 0:r.musicCustomIndexColumnRenderer)||void 0===i?void 0:i.icon)||void 0===o?void 0:o.iconType){case"ARROW_CHART_NEUTRAL":default:p=0;break;case"ARROW_DROP_UP":p=1;break;case"ARROW_DROP_DOWN":p=-1}var _=!1;(null===(a=null==d?void 0:d.playlistItemData)||void 0===a?void 0:a.videoId)&&(_="/watch?v=".concat(null===(s=null==d?void 0:d.playlistItemData)||void 0===s?void 0:s.videoId));var y=parseNavigationEndpoint(d.navigationEndpoint)||_;return!!y&&{isMusician:!0,rank:getText(null===(l=null===(u=null==d?void 0:d.customIndexColumn)||void 0===u?void 0:u.musicCustomIndexColumnRenderer)||void 0===l?void 0:l.text),trend:p,name:getText(null==d?void 0:d.flexColumns[0].musicResponsiveListItemFlexColumnRenderer.text),subtitle:getText(null==d?void 0:d.flexColumns[1].musicResponsiveListItemFlexColumnRenderer.text),thumbnail:getThumbnail(d.thumbnail),url:"https://music.youtube.com".concat(y)};default:return!1}})).filter((function(e){return e}))}function getHeaderText(e){var t,n;return getText((null===(t=e.musicCarouselShelfBasicHeaderRenderer)||void 0===t?void 0:t.title)||(null===(n=e.gridHeaderRenderer)||void 0===n?void 0:n.title))}function getText(e){return e&&Array.isArray(e.runs)?e.runs.map((function(e){return e.text})).join(""):""}function getThumbnail(e){var t,n;return null===(n=null===(t=null==e?void 0:e.musicThumbnailRenderer)||void 0===t?void 0:t.thumbnail)||void 0===n?void 0:n.thumbnails}function parseNavigationEndpoint(e){var t,n,r,i,o,a,s,u,l,c,d,h;switch((null===(r=null===(n=null===(t=null==e?void 0:e.browseEndpoint)||void 0===t?void 0:t.browseEndpointContextSupportedConfigs)||void 0===n?void 0:n.browseEndpointContextMusicConfig)||void 0===r?void 0:r.pageType)||(null===(a=null===(o=null===(i=null==e?void 0:e.watchEndpoint)||void 0===i?void 0:i.watchEndpointMusicSupportedConfigs)||void 0===o?void 0:o.watchEndpointMusicConfig)||void 0===a?void 0:a.musicVideoType)){case"MUSIC_PAGE_TYPE_ARTIST":return(h=null===(s=null==e?void 0:e.browseEndpoint)||void 0===s?void 0:s.browseId)?"/channel/".concat(h):"/";case"MUSIC_PAGE_TYPE_PLAYLIST":return(h=null===(u=null==e?void 0:e.browseEndpoint)||void 0===u?void 0:u.browseId)?h.startsWith("VL")?"/playlist?list=".concat(h.substr(2)):"":"/";case"MUSIC_PAGE_TYPE_ALBUM":return(h=null===(l=null==e?void 0:e.browseEndpoint)||void 0===l?void 0:l.browseId)?"/channel/".concat(h):"/";case"MUSIC_VIDEO_TYPE_UGC":case"MUSIC_VIDEO_TYPE_OMV":var f=null===(c=null==e?void 0:e.watchEndpoint)||void 0===c?void 0:c.videoId,v=null===(d=null==e?void 0:e.watchEndpoint)||void 0===d?void 0:d.playlistId,p="/watch?";return v&&(p+="list=".concat(v,"&")),f&&(p+="v=".concat(f)),p;default:return""}}exports.parseYtcfg=parseYtcfg,exports.parseSectionData=parseSectionData},413:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchGlobal=t.getColor=t.asyncPool=void 0;var r=n(826);t.asyncPool=function(e,t,n){var r=0,i=[],o=[],a=function(){if(r===t.length)return Promise.resolve();var s=t[r++],u=Promise.resolve().then((function(){return n(s,t)}));i.push(u);var l=Promise.resolve();if(e<=t.length){var c=u.then((function(){return o.splice(o.indexOf(c),1)}));o.push(c),o.length>=e&&(l=Promise.race(o))}return l.then((function(){return a()}))};return a().then((function(){return Promise.all(i)}))},t.getColor=function(e){var t=[(16711680&e)>>>16,(65280&e)>>>8,255&e,(4278190080&e)>>>24],n=t.every((function(e){return e==(255&e)}));return t[3]=(t[3]/255).toFixed(3),n?t:""},t.matchGlobal=function(e,t){for(var n=!0,i=[];n;)if(n=e.test(t)){var o=e.lastIndex,a=(0,r.parseForObjectFromStartpoint)(t,o+1);i.push(a)}return i}},680:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o={method:"GET",credentials:!0,cache:"protocol-cache",headers:{"Accept-Charset":"ISO-8859-1,utf-8;q=0.7,*;q=0.7",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.14 Safari/537.36"}};function a(e){return-1!==String(e["Content-Type"]).indexOf("application/json")||-1!==String(e["content-type"]).indexOf("application/json")}function s(){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e){App.fetchAppInfoToNativeThen("lang",(function(t){e(t)}))}))]}))}))}t.default=function(e,t){return r(this,void 0,void 0,(function(){var r,u,l,c;return i(this,(function(i){switch(i.label){case 0:return[4,s()];case 1:return r=i.sent(),(t=t?n(n({},o),t):o).headers=n(n({},t.headers),{"accept-language":r}),t.query&&(e=e.includes("?")?"".concat(e,"&"):"".concat(e,"?"),Object.keys(t.query).forEach((function(n,r){t.query&&(e="".concat(e).concat(r>0?"&":"").concat(n,"=").concat(t.query[n]))}))),t.body&&t.headers&&((u=t.headers["Content-Type"])&&-1!==u.indexOf("application/x-www-form-urlencoded")?"object"==typeof t.body&&(l=t.body,c=[],Object.keys(l).forEach((function(e){var t=decodeURIComponent(e),n=decodeURIComponent(String(l[e]));c.push("".concat(t,"=").concat(n))})),t.body=c.join("&")):a(t.headers)&&"object"==typeof t.body&&(t.body=JSON.stringify(t.body))),delete t.query,[2,new Promise((function(n){App.sendRequestToNativeOptionsThen(e,t,(function(e,t,r,i,o,s){var u=r;i&&a(i)&&"string"==typeof u&&(u=JSON.parse(u)),n({success:e,code:t,data:u,responseHeaders:i,responseURL:o,errorMsg:s})}))}))]}}))}))}},205:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportPotoken=t.compareVersions=t.safeExecute=t.getQueryVariables=t.unicodeTransfrom=t.decodeHTMLEntities=void 0;var o=n(148);t.safeExecute=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a;return i(this,(function(i){switch(i.label){case 0:t={success:!1},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e];case 2:return(n=i.sent()).hasOwnProperty("success")?t=n:(t.data=n,t.success=!0),[3,4];case 3:return r=i.sent(),a=r,t.code=o.Err_Code_Unknown,t.msg=a.message,[3,4];case 4:return[2,t]}}))}))},t.unicodeTransfrom=function(e){var t=e.match(/&#(\d+);/g);if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n].replace(/&#(\d+);/,"$1");e=e.replace(t[n],String.fromCharCode(r))}return e};var a={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"',ldquo:"'",rsquo:"'",rdquo:"'",hellip:"..."};function s(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<Math.max(n.length,r.length);i++){var o=parseInt(n[i]||0),a=parseInt(r[i]||0);if(o<a)return-1;if(o>a)return 1}return 0}t.decodeHTMLEntities=function(e){return e.replace(/&([^;]+);/gm,(function(e,t){return a[t]||e}))},t.getQueryVariables=function(e){var t=e.split("?",2)[1],n={};if(!t)return n;var r=t.split("&");if(!r)return n;for(var i=0;i<r.length;i++){var o=r[i].split("=");o.length>1&&(n[o[0]]=o[1])}return n},t.compareVersions=s,t.isSupportPotoken=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){App.fetchAppInfoToNativeThen("v",(function(t){return e(t)}))}))];case 1:return e=n.sent(),[4,new Promise((function(e){App.fetchPotTokenThen(!1,(function(t){return e(t)}))}))];case 2:return t=n.sent(),[4,new Promise((function(e){App.fetchRemoteConfigWithKeyThen("load_pot_webview",(function(t){return e(t)}))}))];case 3:return[2,n.sent()&&!!t&&s(e,"1.9.4")>=0]}}))}))}},381:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postMessageToJS=void 0;var s=a(n(315)),u=n(205);App.fetchAppInfoToNativeThen||(App.fetchAppInfoToNativeThen=App.native_fetchAppConfigWithKeyCallback),App.sendRequestToNativeOptionsThen||(App.sendRequestToNativeOptionsThen=App.native_requestWithUrlOptionsCallback),App.sendMessageToNative||(App.sendMessageToNative=App.sendMessageToNativeWithPalyload),App.fetchRemoteConfigWithKeyThen||(App.fetchRemoteConfigWithKeyThen=App.native_fetchRemoteConfigWithKeyCallback),App.fetchPotTokenThen||(App.fetchPotTokenThen=function(e,t){t()}),App.getCookiesThen||(App.getCookiesThen=function(e,t){t()}),String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t},t.postMessageToJS=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,l,c,d,h;return o(this,(function(o){switch(o.label){case 0:return"string"==typeof e&&(e=JSON.parse(e)),0!==e.event?[3,2]:(c=e.data,[4,(0,u.safeExecute)(s.default.extractSong(c.url,!1,c.itag,c.allTarget))]);case 1:return t=o.sent(),App.sendMessageToNative(r(r({},e),{data:t})),[3,15];case 2:return 1!==e.event?[3,4]:(c=e.data,[4,s.default.search(c.key,c.next,c.filter)]);case 3:return n=o.sent(),App.sendMessageToNative(r(r({},e),{data:n})),[3,15];case 4:return 2!==e.event?[3,6]:(c=e.data,[4,s.default.extractRecommends(c.url)]);case 5:return i=o.sent(),App.sendMessageToNative(r(r({},e),{data:i})),[3,15];case 6:return 3!==e.event?[3,8]:[4,s.default.extractHots()];case 7:return a=o.sent(),App.sendMessageToNative(r(r({},e),{data:a})),[3,15];case 8:return 5!==e.event?[3,10]:[4,s.default.extractTrending()];case 9:return l=o.sent(),App.sendMessageToNative(r(r({},e),{data:l})),[3,15];case 10:return 6!==e.event?[3,12]:(c=e.data,[4,s.default.extractYtbCharts(c.country)]);case 11:return d=o.sent(),App.sendMessageToNative(r(r({},e),{data:d})),[3,15];case 12:return 4!==e.event?[3,14]:[4,s.default.extractYtbMusicHome()];case 13:return h=o.sent(),App.sendMessageToNative(r(r({},e),{data:h})),[3,15];case 14:App.sendMessageToNative(r(r({},e),{data:{success:!1}})),o.label=15;case 15:return[2]}}))}))}},97:()=>{},480:()=>{}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,r)=>{if(!t){var i=1/0;for(u=0;u<deferred.length;u++){for(var[t,n,r]=deferred[u],o=!0,a=0;a<t.length;a++)(!1&r||i>=r)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[a])))?t.splice(a--,1):(o=!1,r<i&&(i=r));if(o){deferred.splice(u--,1);var s=n();void 0!==s&&(e=s)}}return e}r=r||0;for(var u=deferred.length;u>0&&deferred[u-1][2]>r;u--)deferred[u]=deferred[u-1];deferred[u]=[t,n,r]},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={50:0};__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[o,a,s]=n,u=0;if(o.some((t=>0!==e[t]))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)var l=s(__webpack_require__)}for(t&&t(n);u<o.length;u++)i=o[u],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(l)},n=this.webpackChunkmessage=this.webpackChunkmessage||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__=__webpack_require__.O(void 0,[76],(()=>__webpack_require__(381)));return __webpack_exports__=__webpack_require__.O(__webpack_exports__),__webpack_exports__})()));
//# sourceMappingURL=ytb.js.map